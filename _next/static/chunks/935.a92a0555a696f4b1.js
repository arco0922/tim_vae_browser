(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{7372:function(r,e,n){"use strict";n.r(e),n.d(e,{Annotator:function(){return mr}});var t=n(5893),a=2,o=2048,s=n(4524),u=["ss00","ss01","ss02","ss03","ss04","ss05","ss06","ss07","ss08","ss09","ss10","ss11","ss12","ss13","ss14","ss15","ss16","ss17","ss18","ss19","ss20","ss21","ss22","ss23","ss24"],l={ss00:{cornNum:20,cornAmp:0,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss01:{cornNum:8,cornAmp:.1,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.4},ss02:{cornNum:8,cornAmp:.3,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.4},ss03:{cornNum:8,cornAmp:.5,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.4},ss04:{cornNum:20,cornAmp:.1,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.2},ss05:{cornNum:20,cornAmp:.3,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.4},ss06:{cornNum:20,cornAmp:.5,randomness:0,randomSeed:1,innerCurve:.1,outerCurve:.4},ss07:{cornNum:8,cornAmp:.1,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.4},ss08:{cornNum:8,cornAmp:.3,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.4},ss09:{cornNum:8,cornAmp:.5,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.4},ss10:{cornNum:20,cornAmp:.1,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.2},ss11:{cornNum:20,cornAmp:.3,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.4},ss12:{cornNum:20,cornAmp:.5,randomness:1,randomSeed:3,innerCurve:.1,outerCurve:.4},ss13:{cornNum:8,cornAmp:.1,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss14:{cornNum:8,cornAmp:.3,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss15:{cornNum:8,cornAmp:.5,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss16:{cornNum:20,cornAmp:.1,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss17:{cornNum:20,cornAmp:.3,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss18:{cornNum:20,cornAmp:.5,randomness:0,randomSeed:1,innerCurve:0,outerCurve:0},ss19:{cornNum:8,cornAmp:.1,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0},ss20:{cornNum:8,cornAmp:.3,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0},ss21:{cornNum:8,cornAmp:.5,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0},ss22:{cornNum:20,cornAmp:.1,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0},ss23:{cornNum:20,cornAmp:.3,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0},ss24:{cornNum:20,cornAmp:.5,randomness:1,randomSeed:3,innerCurve:0,outerCurve:0}},c=n(9839),m=n(7294),p=function(r){r.setup=function(){r.createCanvas(r.props.canvasWidth,r.props.canvasHeight)};r.draw=function(){r.background(255),r.translate(r.width/2,r.height/2),r.fill(255),r.stroke(0),r.rect(-r.width/2,-r.height/2,r.width,r.height);var e=r.props.samplingPoints;!function(e){var n=e.radius,t=e.samplingPoints;r.stroke(0),r.strokeWeight(1),r.noFill(),r.beginShape(),t.forEach((function(e){r.vertex(n*e[0],n*e[1])})),r.endShape(r.CLOSE)}({radius:r.width/4,samplingPoints:e}),r.translate(-r.width/2,-r.height/2)}},f=function(r){var e=r.canvasWidth,n=r.canvasHeight,a=r.samplingPoints,o=r.className;return(0,t.jsx)(c.r,{sketch:p,sketchProps:{canvasWidth:e,canvasHeight:n,samplingPoints:a},className:o})},d=n(7941),h=n(9645),v=n.n(h),y=n(4035),_=n.n(y);function b(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function x(r){return function(r){if(Array.isArray(r))return b(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"===typeof r)return b(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=2e3,C=function(r){var e=r.length/4,n=r.slice(0,2*e),t=r.slice(2*e),a=w(n),o=w(t);return a.map((function(r,e){return[r,o[e]]}))},A=function(r){for(var e=r.p,n=r.bezierOperator,t=0,a=n[0].x,o=n[0].y,s=a,i=o,u=Array(2001),l=0;l<=S;l++)s=e.bezierPoint(n[0].x,n[1].x,n[2].x,n[3].x,l/S),i=e.bezierPoint(n[0].y,n[1].y,n[2].y,n[3].y,l/S),t+=e.dist(a,o,s,i),u[l]=t,a=s,o=i;return u},g=function(r){for(var e=r.p,n=r.bezierOperator,t=r.distArray,a=r.offset,o=r.segmentL,s=0,i=[],u=[],l=0;l<=S;l++)if(t[l]>=o*s+a){var c=e.bezierPoint(n[0].x,n[1].x,n[2].x,n[3].x,l/S),m=e.bezierPoint(n[0].y,n[1].y,n[2].y,n[3].y,l/S);i.push(c),u.push(m),s+=1}return{pointsX:i,pointsY:u,rest:a+s*o-t[2e3]}},j=function(r){var e=r.p,n=r.cornNum,t=r.cornAmp,a=r.randomness,o=r.randomSeed,s=r.outerCurve,i=r.innerCurve;e.randomSeed(o);for(var u=Array(2*n),l=Array(2*n),c=0;c<2*n;c++)u[c]=1*(1+t*e.pow(-1,c)+a*e.random(-1,1)*.4),l[c]=e.PI*c/n-e.PI/2+a*e.random(-1,1)*e.PI/n;for(var m=Array(2*n),p=Array(2*n),f=0;f<2*n;f++){var d=f,h=(f+1)%(2*n),v=u[d]*e.cos(l[d]),y=u[d]*e.sin(l[d]),_=u[h]*e.cos(l[h]),b=u[h]*e.sin(l[h]),S=e.createVector(-y,v).normalize(),C=e.createVector(b,-_).normalize(),j=void 0;d%2==0?(j=[{x:v,y:y},{x:v+.5*s*S.x,y:y+.5*s*S.y},{x:_+.5*i*C.x,y:b+.5*i*C.y},{x:_,y:b}],m[f]=j,p[f]=A({p:e,bezierOperator:j})):(j=[{x:v,y:y},{x:v+.5*i*S.x,y:y+.5*i*S.y},{x:_+.5*s*C.x,y:b+.5*s*C.y},{x:_,y:b}],m[f]=j,p[f]=A({p:e,bezierOperator:j}))}var N=0;p.forEach((function(r){return N+=r[2e3]}));for(var w=N/512,I=0,P=[],k=[],E=0;E<2*n;E++){var O=g({p:e,bezierOperator:m[E],distArray:p[E],offset:I,segmentL:w}),F=O.pointsX,D=O.pointsY,T=O.rest;P=x(P).concat(x(F)),k=x(k).concat(x(D)),I=T}for(;P.length>512;)P.pop(),k.pop();return{samplingPointsX:P,samplingPointsY:k}},N=function(r){var e=new(v())(r.length),n=e.toComplexArray(r,null),t=e.createComplexArray();return e.transform(t,n),t},w=function(r){var e=r.length/2,n=new(v())(e),t=n.createComplexArray();return n.inverseTransform(t,r),n.fromComplexArray(t,null)},I=n(7979),P=n(1163),k=n(1314),E=n.n(k),O=m.memo((function(r){var e=r.text,n=r.className,a=r.onClick;return(0,t.jsx)("button",{onClick:a,className:"".concat(E().button__basic," ").concat(n||""),children:e})}));function F(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function D(r){return function(r){if(Array.isArray(r))return r}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"===typeof r)return F(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(r,e)}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=n(5675),V=n.n(T),H=n(6342),z=n.n(H),M=function(r){var e=r.index,n=r.sampleShapeId,a=r.selectCallback;return(0,t.jsxs)("div",{onClick:a,className:z().container,children:[(0,t.jsx)("p",{className:z().index__label,children:e}),(0,t.jsx)(V(),{className:z().shape__image,src:"/imgs/sampleShapes/".concat(n,".jpg"),alt:"".concat(e," shape"),width:150,height:150})]})},B=n(6338),J=n.n(B);function Y(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],s=!0,i=!1;try{for(n=n.call(r);!(s=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Y(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(r){var e=r.selectCallback,n=$(m.useState(function(r){for(var e=D(r).slice(0),n=e.length-1;n>=0;n--){var t,a=Math.floor(Math.random()*(n+1));t=[e[a],e[n]],e[n]=t[0],e[a]=t[1]}return e}(u)),2),a=n[0];n[1];return(0,t.jsx)("div",{className:J().container,children:a.map((function(r,n){return(0,t.jsx)(M,{sampleShapeId:r,index:n+1,selectCallback:function(){return e(r)}},r)}))})},U=function(r){var e=r.value,n=r.setValue,a=r.min,o=r.max,s=r.step,i=r.disabled,u=void 0!==i&&i,l=r.className,c=m.useCallback((function(r){var e=Number(r.target.value);n(e)}),[n]);return(0,t.jsx)("input",{type:"range",min:a,max:o,step:s,disabled:u,value:e,onChange:c,className:l})},W={label:"\u30c4\u30ce\u306e\u672c\u6570",params:{min:5,max:30,step:1}},L={label:"\u30c4\u30ce\u306e\u9577\u3055",params:{min:0,max:.5,step:.01}},R={label:"\u30e9\u30f3\u30c0\u30e0\u306e\u5ea6\u5408\u3044",params:{min:0,max:1,step:.01}},Z={label:"\u30e9\u30f3\u30c0\u30e0\u306e\u3055\u305b\u65b9",params:{min:1,max:20,step:1}},K={label:"\u30c4\u30ce\u306e\u6839\u5143\u306e\u4e38\u3055",params:{min:0,max:1,step:.01}},G={label:"\u30c4\u30ce\u306e\u5148\u7aef\u306e\u4e38\u3055",params:{min:0,max:1,step:.01}},Q=n(3006),q=n.n(Q),rr=n(5152);function er(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function nr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],s=!0,i=!1;try{for(n=n.call(r);!(s=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return er(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tr=n.n(rr)()((function(){return n.e(688).then(n.bind(n,688)).then((function(r){return r.DrawFromParamSketch}))}),{loadableGenerated:{webpack:function(){return[688]}},ssr:!1}),ar=function(r){var e=r.defaultShapeParams,n=r.confirmCallback,a=r.cancelCallback,o=W,s=nr(m.useState(e.cornNum),2),i=s[0],u=s[1],l=L,c=nr(m.useState(e.cornAmp),2),p=c[0],f=c[1],d=R,h=nr(m.useState(e.randomness),2),v=h[0],y=h[1],_=Z,b=nr(m.useState(e.randomSeed),2),x=b[0],S=b[1],C=K,A=nr(m.useState(e.innerCurve),2),g=A[0],j=A[1],N=G,w=nr(m.useState(e.outerCurve),2),I=w[0],P=w[1];return m.useEffect((function(){u(e.cornNum),f(e.cornAmp),y(e.randomness),S(e.randomSeed),j(e.innerCurve),P(e.outerCurve)}),[e]),(0,t.jsxs)("div",{className:q().container,children:[(0,t.jsx)("div",{className:q().sketch__section,children:(0,t.jsx)(tr,{canvasWidth:150,canvasHeight:150,shapeParams:{cornNum:i,cornAmp:p,randomness:v,randomSeed:x,innerCurve:g,outerCurve:I}})}),(0,t.jsxs)("div",{className:q().edit__section,children:[(0,t.jsxs)("div",{className:q().slider__section,children:[(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:o.label}),(0,t.jsx)(U,{value:i,setValue:u,min:o.params.min,max:o.params.max,step:o.params.step,className:q().slider})]}),(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:l.label}),(0,t.jsx)(U,{value:p,setValue:f,min:l.params.min,max:l.params.max,step:l.params.step,className:q().slider})]}),(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:d.label}),(0,t.jsx)(U,{value:v,setValue:y,min:d.params.min,max:d.params.max,step:d.params.step,className:q().slider})]}),(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:_.label}),(0,t.jsx)(U,{value:x,setValue:S,min:_.params.min,max:_.params.max,step:_.params.step,className:q().slider})]}),(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:C.label}),(0,t.jsx)(U,{value:g,setValue:j,min:C.params.min,max:C.params.max,step:C.params.step,className:q().slider})]}),(0,t.jsxs)("div",{className:q().slider__wrapper,children:[(0,t.jsx)("span",{className:q().slider__label,children:N.label}),(0,t.jsx)(U,{value:I,setValue:P,min:N.params.min,max:N.params.max,step:N.params.step,className:q().slider})]})]}),(0,t.jsxs)("div",{className:q().button__section,children:[void 0!==n&&(0,t.jsx)(O,{text:"\u6c7a\u5b9a",className:q().confirm__button,onClick:function(){return n({cornNum:i,cornAmp:p,randomness:v,randomSeed:x,innerCurve:g,outerCurve:I})}}),a&&(0,t.jsx)(O,{text:"\u30ad\u30e3\u30f3\u30bb\u30eb",className:q().cancel__button,onClick:a})]})]})]})},or=n(9678),sr=n.n(or);function ir(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ur(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function lr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){ur(r,e,n[e])}))}return r}function cr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],s=!0,i=!1;try{for(n=n.call(r);!(s=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return ir(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mr=function(r){var e=r.repSoundId,n=r.annotations,i=r.setAnnotations,u=m.useCallback((function(r){var t=lr({},n,ur({},e,r));i(t)}),[i]),c=m.useCallback((function(){var r=lr({},n);delete r[e],i(r),v("YET")}),[]),p=cr(m.useState("YET"),2),h=p[0],v=p[1],y=cr(m.useState(null),2),b=y[0],S=y[1],A=cr(m.useState(0),2),g=A[0],w=A[1],k=cr(m.useState(null),2),E=k[0],F=k[1];m.useEffect((function(){if("YET"===h){var r=new d.f(a,o);S(r)}}),[h]),m.useEffect((function(){if(null!==b){var r=0,t=!0,a=!1,o=void 0;try{for(var i,u=Object.entries(n)[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var l=cr(i.value,2),c=l[0],m=l[1],p=c;if(p===e){v("DONE");var f=C(m);F(f)}var d=s.g[p];b.addPoint(d,m),r+=1}}catch(h){a=!0,o=h}finally{try{t||null==u.return||u.return()}finally{if(a)throw o}}w(r)}}),[e,n,b]);var D=m.useCallback((function(){v(g<=a?"SELECT":"SEARCH")}),[g]),T=cr(m.useState(null),2),V=T[0],H=T[1],z=m.useCallback((function(r){H(r),v("EDIT")}),[]),M=m.useCallback((function(r){var e=function(r){var e=r.cornNum,n=r.cornAmp,t=r.randomness,a=r.randomSeed,o=r.outerCurve,s=r.innerCurve,i=new(_())((function(){})),u=j({p:i,cornNum:e,cornAmp:n,randomness:t,randomSeed:a,innerCurve:s,outerCurve:o}),l=u.samplingPointsX,c=u.samplingPointsY,m=N(l),p=N(c);return x(m).concat(x(p))}(r);u(e),v("DONE")}),[u]),B=m.useCallback((function(){v("SELECT")}),[]),J=(0,P.useRouter)(),Y=m.useCallback((function(){J.push("/settingshape")}),[J]),$=m.useCallback((function(){i({}),J.push("/settingshape")}),[J,i]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:["SoundID : ",e]}),(0,t.jsx)("audio",{src:(0,I.H)("/audios/repSounds/".concat(e,".wav")),controls:!0}),"YET"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{text:"\u3053\u306e\u97f3\u306e\u56f3\u5f62\u306e\u9078\u629e\u3092\u958b\u59cb",onClick:D}),(0,t.jsx)(O,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u9078\u629e\u3092\u30ea\u30bb\u30c3\u30c8",onClick:$,className:sr().cancel__button})]}),"SELECT"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Select one shape that you feel most congruent to the sound."}),(0,t.jsx)(X,{selectCallback:z})]}),"EDIT"===h&&null!==V&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Adjust the parameters so that you feel the shape most congruent to the sound."}),(0,t.jsx)(ar,{defaultShapeParams:l[V],confirmCallback:M,cancelCallback:B})]}),"SEARCH"===h&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("p",{children:"Adjust the parameters so that you feel the shape most congruent to the sound."})}),"DONE"===h&&null!==E&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{canvasWidth:150,canvasHeight:150,samplingPoints:E}),(0,t.jsx)(O,{text:"\u6b21\u3078",onClick:Y}),(0,t.jsx)(O,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u9078\u629e\u3092\u3084\u308a\u76f4\u3059",onClick:c,className:sr().cancel__button}),(0,t.jsx)(O,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u9078\u629e\u3092\u30ea\u30bb\u30c3\u30c8",onClick:$,className:sr().cancel__button})]})]})}},9839:function(r,e,n){"use strict";n.d(e,{r:function(){return l}});var t=n(5893),a=n(7294),o=n(4035),s=n.n(o);function i(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function u(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],s=!0,i=!1;try{for(n=n.call(r);!(s=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);s=!0);}catch(u){i=!0,a=u}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return i(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(r){var e=r.sketch,n=r.sketchProps,o=r.className,i=u(a.useState(null),2),l=i[0],c=i[1],m=a.useRef(null);return a.useEffect((function(){if(null!==m.current){var r=function(r){var e=r.sketch,n=r.initialSketchProps;return function(r){r.props=n,e(r)}}({sketch:e,initialSketchProps:n}),t=new(s())(r,m.current);c(t)}}),[]),a.useEffect((function(){null!==l&&(l.props=n)}),[l,n]),(0,t.jsx)("div",{ref:m,className:o})}},7941:function(r,e,n){"use strict";n.d(e,{f:function(){return u}});var t=n(1029),a=n(6951),o=function(r,e,n,o){for(var s=r.length,i=e.length,u=n.map((function(e){return e.map((function(e,n){return e-r[n]}))})),l=u.map((function(r){var e=r.reduce((function(r,e){return r+e*e}),0);return 0===e?1:1/e})),c=o.map((function(r){return r.map((function(r,n){return r-e[n]}))})),m=new Array(s).fill(0).map((function(){return new Array(s).fill(0)})),p=new Array(i).fill(0).map((function(){return new Array(s).fill(0)})),f=0;f<n.length;f++){for(var d=0;d<s;d++)for(var h=0;h<s;h++)m[d][h]+=l[f]*u[f][h]*u[f][d];for(var v=0;v<i;v++)for(var y=0;y<s;y++)p[v][y]+=l[f]*u[f][y]*c[f][v]}var _=new t.Z(m),b=new t.Z(p),x=(0,a.S)(_,!0);return b.mmul(x).to2DArray()},s=n(1568),i=n(2055);var u=function(){function r(e,n){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.inputDim=e,this.outputDim=n,this.points=[],this.vectors=[],this.simplexPointIds=[],this.simplexVectors=[],this.hullFacetPointIds=[],this.hullFacetVectors=[],this.simplexTransforms=[],this.hullFacetJacobians=[]}var e=r.prototype;return e.addPoint=function(r,e){this.points.push(r),this.vectors.push(e),this._updateDelaunay(),this._updateSimplexTransforms(),this._updateHullFacetJacobians()},e.estimate=function(r){var e=this._findSimplex(r),n=e.iSimplex,t=e.barycentricCoordInSimplex;if(n>=0)return this._linearInterpolateVector(t,this.simplexVectors[n]);var a=this._findNearestFacet(r),o=a.iFacet,s=a.barycentricCoordOfNearestPoint,u=a.ordinaryCoordOfNearestPoint,l=this._linearInterpolateVector(s,this.hullFacetVectors[o]),c=this._linearInterpolateMatrix(s,this.hullFacetJacobians[o]),m=i.$XF(r,u);return this._firstOrderApproximation(l,c,m)},e._updateDelaunay=function(){if(2===this.inputDim){for(var r=s.Z.from(this.points),e=r.triangles,n=[],t=[],a=0;a<e.length;a+=3)n.push([e[a],e[a+1],e[a+2]]),t.push([this.vectors[e[a]],this.vectors[e[a+1]],this.vectors[e[a+2]]]);var o=r.hull,i=[],u=[];if(o.length<this.inputDim+1){var l=this;i.push(Array.from(o)),u.push(Array.from(o).map((function(r){return l.vectors[r]})))}else for(var c=0;c<o.length;c++)i.push([o[c],o[(c+1)%o.length]]),u.push([this.vectors[o[c]],this.vectors[o[(c+1)%o.length]]]);return this.simplexPointIds=n,this.simplexVectors=t,this.hullFacetPointIds=i,void(this.hullFacetVectors=u)}},e._updateSimplexTransforms=function(){for(var r=this,e=function(e){for(var o=r,s=new Array(r.inputDim+1).fill(0).map((function(){return new Array(o.inputDim).fill(0)})),i=0;i<r.inputDim;i++)s[r.inputDim][i]=r.points[r.simplexPointIds[e][r.inputDim]][i];for(var u=new Array(r.inputDim).fill(0).map((function(){return new Array(o.inputDim).fill(0)})),l=0;l<r.inputDim;l++)for(var c=0;c<r.inputDim;c++)u[l][c]=r.points[r.simplexPointIds[e][c]][l]-r.points[r.simplexPointIds[e][r.inputDim]][l];for(var m=new t.Z(u),p=(0,a.S)(m,!0).to2DArray(),f=0;f<r.inputDim;f++)for(var d=0;d<r.inputDim;d++)s[f][d]=p[f][d];n.push(s)},n=[],o=0;o<this.simplexPointIds.length;o++)e(o);this.simplexTransforms=n},e._updateHullFacetJacobians=function(){for(var r=[],e=0;e<this.hullFacetPointIds.length;e++){for(var n=[],t=this.hullFacetPointIds[e],a=0;a<t.length;a++){var s=this,i=t[a],u=this._findAdjPointIds(i),l=[],c=[];u.forEach((function(r){l.push(s.points[r]),c.push(s.vectors[r])}));var m=o(this.points[i],this.vectors[i],l,c);n.push(m)}r.push(n)}this.hullFacetJacobians=r},e._findAdjPointIds=function(r){var e=new Set;return 0===this.simplexPointIds.length?this.points.forEach((function(n,t){t!==r&&e.add(t)})):this.simplexPointIds.forEach((function(n){new Set(n).has(r)&&n.forEach((function(n){n!==r&&e.add(n)}))})),e},e._findSimplex=function(r){for(var e=1e-5,n=0;n<this.simplexPointIds.length;n++){for(var t=this._calcBarycentricCoordInSimplex(r,n),a=!0,o=0;o<t.length;o++)(t[o]<-e||t[o]>1+e)&&(a=!1);if(a)return{iSimplex:n,barycentricCoordInSimplex:t}}return{iSimplex:-1,barycentricCoordInSimplex:[]}},e._findNearestFacet=function(r){for(var e=1/0,n=-1,t=[],a=[],o=0;o<this.hullFacetPointIds.length;o++){var s=this._calcBarycentricCoordOfNearestPointInFacet(r,o),u=this._calcOrdinaryCoordFromBarycentricCoordInFacet(s,o),l=i.KOy(i.$XF(r,u));l<e&&(e=l,n=o,t=s,a=u)}return{iFacet:n,barycentricCoordOfNearestPoint:t,ordinaryCoordOfNearestPoint:a}},e._calcBarycentricCoordOfNearestPointInFacet=function(r,e){var n=this,t=this.hullFacetPointIds[e].length;if(1===t)return[1];for(var a=new Array(t-1).fill(0).map((function(r,a){return i.$XF(n.points[n.hullFacetPointIds[e][a]],n.points[n.hullFacetPointIds[e][t-1]])})),o=i.$XF(r,this.points[this.hullFacetPointIds[e][t-1]]),s=new Array(t-1).fill(0).map((function(){return new Array(t-1)})),u=0;u<t-1;u++)for(var l=0;l<t-1;l++)s[u][l]=i.AKD(a[u],a[l]);for(var c=new Array(t-1).fill(0),m=0;m<t-1;m++)c[m]=i.AKD(a[m],o);var p=i.JpY(i.JBn(s),c),f=new Array(t).fill(0);f[t-1]=1;for(var d=0;d<t-1;d++)f[d]=Math.min(Math.max(p[d],0),1),f[t-1]-=f[d];return f},e._calcOrdinaryCoordFromBarycentricCoordInFacet=function(r,e){var n=this,t=this.hullFacetPointIds[e].map((function(r){return n.points[r]}));return this._linearInterpolateVector(r,t)},e._calcBarycentricCoordInSimplex=function(r,e){var n=r.length,t=new Array(n+1).fill(0);t[n]=1;for(var a=this.simplexTransforms[e],o=0;o<n;o++){for(var s=0;s<n;s++)t[o]+=a[o][s]*(r[s]-a[n][s]);t[n]-=t[o]}return t},e._linearInterpolateVector=function(r,e){var n=r.length;if(0===n)return[];for(var t=e[0].length,a=new Array(t).fill(0),o=0;o<t;o++)for(var s=0;s<n;s++)a[o]+=r[s]*e[s][o];return a},e._linearInterpolateMatrix=function(r,e){var n=r.length;if(0===n)return[];for(var t=e[0].length,a=e[0][0].length,o=new Array(t).fill(0).map((function(){return new Array(a).fill(0)})),s=0;s<t;s++)for(var i=0;i<a;i++)for(var u=0;u<n;u++)o[s][i]+=r[u]*e[u][s][i];return o},e._firstOrderApproximation=function(r,e,n){return i.IHx(r,i.JpY(e,n))},r}()},7979:function(r,e,n){"use strict";n.d(e,{H:function(){return a}});var t=n(1752);function a(r){return(0,t.default)().publicRuntimeConfig.urlPrefix+r}},9678:function(r){r.exports={cancel__button:"Annotator_cancel__button__tVcIH"}},6342:function(r){r.exports={container:"SampleShapeItem_container__jsZV6",index__label:"SampleShapeItem_index__label__eUQGO",shape__image:"SampleShapeItem_shape__image__j4cJa"}},6338:function(r){r.exports={container:"SampleShapeSelector_container__S_BQd"}},3006:function(r){r.exports={container:"ShapeEditor_container__OPfzu",edit__section:"ShapeEditor_edit__section__creBO",slider__section:"ShapeEditor_slider__section__xV7Tr",slider__wrapper:"ShapeEditor_slider__wrapper__fTl4j",slider__label:"ShapeEditor_slider__label__hiTAW",slider:"ShapeEditor_slider__HfkjE",button__section:"ShapeEditor_button__section__FqTn8",confirm__button:"ShapeEditor_confirm__button___yAHi",cancel__button:"ShapeEditor_cancel__button__yCJ8k"}},1314:function(r){r.exports={button__basic:"Button_button__basic__5C4_V"}},2007:function(){}}]);