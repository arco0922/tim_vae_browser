"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{5995:function(t,n,e){e.r(n),e.d(n,{ExpAnnotator:function(){return g}});var r=e(5893),a=e(2916),l=e(4524),o=e(915),u=e(5640),c=e(7941),i=e(5952),s=e(7979),f=e(7294),b=e(1639),d=e(7347),m=e(4449),y=e(9678),h=e.n(y),p=e(9327),C=e(7495);function j(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function x(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function E(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){x(t,n,e[n])}))}return t}function v(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,a,l=[],o=!0,u=!1;try{for(e=e.call(t);!(o=(r=e.next()).done)&&(l.push(r.value),!n||l.length!==n);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==e.return||e.return()}finally{if(u)throw a}}return l}}(t,n)||k(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,n){if(t){if("string"===typeof t)return j(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(t,n):void 0}}var g=function(t){var n=t.repSoundId,e=t.annotations,y=t.setAnnotations,j=t.correctEstimationHistory,k=t.setCorrectEstimationHistory,g=t.goNextCallback,O=t.resetCallback,w=f.useCallback((function(t){var r=E({},e,x({},n,t));y(r)}),[y]),D=f.useCallback((function(t){var e=S(j).filter((function(t){return t[0]!==n}));e.push([n,t]),k(e)}),[j,k,n]),A=f.useCallback((function(){var t=E({},e);delete t[n],y(t),_("YET"),null!==ct.current&&ut(!ct.current.paused)}),[]),N=v(f.useState("YET"),2),T=N[0],_=N[1],P=v(f.useState(null),2),F=P[0],I=P[1],H=v(f.useState(0),2),R=H[0],z=H[1],L=v(f.useState(null),2),V=L[0],Y=L[1],U=v(f.useState(null),2),G=U[0],J=U[1],W=v(f.useState(null),2),M=W[0],Z=W[1];f.useEffect((function(){if("YET"===T){var t=new c.f(a.R.inputDim,a.R.outputDim);I(t)}}),[T]),f.useEffect((function(){if(null!==F){var t=0,r=!0,a=!1,o=void 0;try{for(var u,c=Object.entries(e)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var s=v(u.value,2),f=s[0],b=s[1],d=f;if(d===n){_("DONE");var m=(0,i.H)(b);Y(m)}var y=l.g[d];F.addPoint(y,b),t+=1}}catch(C){a=!0,o=C}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}if(t>0){var h=F.estimate(l.g[n]),p=F.suggestVectors(l.g[n]);J(h),Z(p)}z(t)}}),[n,e,F]);var $=f.useCallback((function(){R<=a.R.inputDim?_("SELECT"):_("JUDGE")}),[R]),q=v(f.useState(null),2),B=q[0],K=q[1],Q=f.useCallback((function(t){K(t),_("EDIT")}),[]),X=f.useCallback((function(t){var n=(0,i.Z)(t);w(n),_("DONE")}),[w]),tt=f.useCallback((function(){_("SELECT")}),[]),nt=f.useCallback((function(){null!==G&&(w(G),D(!0),_("DONE"))}),[G,w,D]),et=f.useCallback((function(){null!==G&&(D(!1),_("SEARCH"))}),[G,D]),rt=f.useCallback((function(t){w(t),_("DONE")}),[w]),at=f.useCallback((function(){_("SELECT")}),[]),lt=v(f.useState(!1),2),ot=lt[0],ut=lt[1],ct=f.useRef(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h2",{children:["\u30b9\u30c6\u30c3\u30d71-",R+1]}),(0,r.jsx)("audio",{src:(0,s.H)("/audios/repSounds/".concat(n,".wav")),controls:!0,loop:!0,onPlay:function(){return ut(!0)},ref:ct}),"DONE"===T||ot?(0,r.jsxs)(r.Fragment,{children:["YET"===T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u958b\u59cb",onClick:$}),R>0&&(0,r.jsx)(b.z,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3001\u56f3\u5f62\u306e\u56de\u7b54\u3092\u521d\u3081\u304b\u3089\u884c\u3046",onClick:O,className:h().cancel__button})]}),"SELECT"===T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"\u4e0b\u306e\u56f3\u5f62\u306e\u4e2d\u304b\u3089\u3001\u6700\u3082\u97f3\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u56f3\u5f62\u3092\u4e00\u3064\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002"}),(0,r.jsx)(d.L,{selectCallback:Q})]}),"EDIT"===T&&null!==B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5fae\u8abf\u7bc0\u3057\u3001\u6700\u3082\u97f3\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u3088\u3046\u306b\u56f3\u5f62\u3092\u5909\u5f62\u3055\u305b\u3066\u304f\u3060\u3055\u3044"}),(0,r.jsx)(m.T,{defaultShapeParams:o._[B],confirmCallback:X,cancelCallback:tt})]}),"JUDGE"===T&&null!==G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"\u3053\u306e\u56f3\u5f62\u306f\u97f3\u306b\u5bfe\u3057\u3066\u3057\u3063\u304f\u308a\u304f\u308b\u3068\u611f\u3058\u307e\u3059\u304b\uff1f"}),(0,r.jsx)(p.W,{estimatedShapeVector:G,isCorrectCallback:nt,isNotCorrectCallback:et})]}),"SEARCH"===T&&null!==G&&null!==M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8abf\u7bc0\u3057\u3066\u3001\u56f3\u5f62\u304c\u97f3\u306b\u3057\u3063\u304f\u308a\u304f\u308b\u3068\u611f\u3058\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,r.jsx)(C.P,{defaultShapeVector:G,suggestionVectorsInfo:M,foundCallback:rt,notFoundCallback:at})]})]}):(0,r.jsx)("p",{children:"\u97f3\u3092\u518d\u751f\u3057\u3066\u304f\u3060\u3055\u3044(\u97f3\u306f\u7e70\u308a\u8fd4\u3057\u518d\u751f\u3055\u308c\u307e\u3059)"}),"DONE"===T&&null!==V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.DrawSamplingPointsSketch,{canvasWidth:150,canvasHeight:150,samplingPoints:V}),(0,r.jsx)(b.z,{text:"\u6b21\u3078",onClick:g}),(0,r.jsx)(b.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u3084\u308a\u76f4\u3059",onClick:A,className:h().cancel__button}),R>0&&(0,r.jsx)(b.z,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3001\u56f3\u5f62\u306e\u56de\u7b54\u3092\u521d\u3081\u304b\u3089\u884c\u3046",onClick:O,className:h().cancel__button})]})]})}}}]);