(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7417],{9645:function(t){"use strict";function n(t){if(this.size=0|t,this.size<=1||0!==(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var n=new Array(2*this.size),r=0;r<n.length;r+=2){const t=Math.PI*r/this.size;n[r]=Math.cos(t),n[r+1]=-Math.sin(t)}this.table=n;for(var e=0,o=1;this.size>o;o<<=1)e++;this._width=e%2===0?e-1:e,this._bitrev=new Array(1<<this._width);for(var i=0;i<this._bitrev.length;i++){this._bitrev[i]=0;for(var a=0;a<this._width;a+=2){var s=this._width-a-2;this._bitrev[i]|=(i>>>a&3)<<s}}this._out=null,this._data=null,this._inv=0}t.exports=n,n.prototype.fromComplexArray=function(t,n){for(var r=n||new Array(t.length>>>1),e=0;e<t.length;e+=2)r[e>>>1]=t[e];return r},n.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var n=0;n<t.length;n++)t[n]=0;return t},n.prototype.toComplexArray=function(t,n){for(var r=n||this.createComplexArray(),e=0;e<r.length;e+=2)r[e]=t[e>>>1],r[e+1]=0;return r},n.prototype.completeSpectrum=function(t){for(var n=this._csize,r=n>>>1,e=2;e<r;e+=2)t[n-e]=t[e],t[n-e+1]=-t[e+1]},n.prototype.transform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._transform4(),this._out=null,this._data=null},n.prototype.realTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=0,this._realTransform4(),this._out=null,this._data=null},n.prototype.inverseTransform=function(t,n){if(t===n)throw new Error("Input and output buffers must be different");this._out=t,this._data=n,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null},n.prototype._transform4=function(){var t,n,r=this._out,e=this._csize,o=1<<this._width,i=e/o<<1,a=this._bitrev;if(4===i)for(t=0,n=0;t<e;t+=i,n++){const r=a[n];this._singleTransform2(t,r,o)}else for(t=0,n=0;t<e;t+=i,n++){const r=a[n];this._singleTransform4(t,r,o)}var s=this._inv?-1:1,u=this.table;for(o>>=2;o>=2;o>>=2){var c=(i=e/o<<1)>>>2;for(t=0;t<e;t+=i)for(var l=t+c,f=t,_=0;f<l;f+=2,_+=o){const t=f,n=t+c,e=n+c,o=e+c,i=r[t],a=r[t+1],l=r[n],h=r[n+1],p=r[e],d=r[e+1],m=r[o],v=r[o+1],y=i,b=a,g=u[_],x=s*u[_+1],A=l*g-h*x,S=l*x+h*g,j=u[2*_],w=s*u[2*_+1],C=p*j-d*w,O=p*w+d*j,z=u[3*_],N=s*u[3*_+1],k=m*z-v*N,P=m*N+v*z,T=y+C,I=b+O,E=y-C,W=b-O,J=A+k,M=S+P,F=s*(A-k),R=s*(S-P),L=T+J,X=I+M,Y=T-J,q=I-M,H=E+R,V=W-F,Z=E-R,D=W+F;r[t]=L,r[t+1]=X,r[n]=H,r[n+1]=V,r[e]=Y,r[e+1]=q,r[o]=Z,r[o+1]=D}}},n.prototype._singleTransform2=function(t,n,r){const e=this._out,o=this._data,i=o[n],a=o[n+1],s=o[n+r],u=o[n+r+1],c=i+s,l=a+u,f=i-s,_=a-u;e[t]=c,e[t+1]=l,e[t+2]=f,e[t+3]=_},n.prototype._singleTransform4=function(t,n,r){const e=this._out,o=this._data,i=this._inv?-1:1,a=2*r,s=3*r,u=o[n],c=o[n+1],l=o[n+r],f=o[n+r+1],_=o[n+a],h=o[n+a+1],p=o[n+s],d=o[n+s+1],m=u+_,v=c+h,y=u-_,b=c-h,g=l+p,x=f+d,A=i*(l-p),S=i*(f-d),j=m+g,w=v+x,C=y+S,O=b-A,z=m-g,N=v-x,k=y-S,P=b+A;e[t]=j,e[t+1]=w,e[t+2]=C,e[t+3]=O,e[t+4]=z,e[t+5]=N,e[t+6]=k,e[t+7]=P},n.prototype._realTransform4=function(){var t,n,r=this._out,e=this._csize,o=1<<this._width,i=e/o<<1,a=this._bitrev;if(4===i)for(t=0,n=0;t<e;t+=i,n++){const r=a[n];this._singleRealTransform2(t,r>>>1,o>>>1)}else for(t=0,n=0;t<e;t+=i,n++){const r=a[n];this._singleRealTransform4(t,r>>>1,o>>>1)}var s=this._inv?-1:1,u=this.table;for(o>>=2;o>=2;o>>=2){var c=(i=e/o<<1)>>>1,l=c>>>1,f=l>>>1;for(t=0;t<e;t+=i)for(var _=0,h=0;_<=f;_+=2,h+=o){var p=t+_,d=p+l,m=d+l,v=m+l,y=r[p],b=r[p+1],g=r[d],x=r[d+1],A=r[m],S=r[m+1],j=r[v],w=r[v+1],C=y,O=b,z=u[h],N=s*u[h+1],k=g*z-x*N,P=g*N+x*z,T=u[2*h],I=s*u[2*h+1],E=A*T-S*I,W=A*I+S*T,J=u[3*h],M=s*u[3*h+1],F=j*J-w*M,R=j*M+w*J,L=C+E,X=O+W,Y=C-E,q=O-W,H=k+F,V=P+R,Z=s*(k-F),D=s*(P-R),U=L+H,$=X+V,G=Y+D,B=q-Z;if(r[p]=U,r[p+1]=$,r[d]=G,r[d+1]=B,0!==_){if(_!==f){var K=Y+-s*D,Q=-q+-s*Z,tt=L+-s*H,nt=-X- -s*V,rt=t+l-_,et=t+c-_;r[rt]=K,r[rt+1]=Q,r[et]=tt,r[et+1]=nt}}else{var ot=L-H,it=X-V;r[m]=ot,r[m+1]=it}}}},n.prototype._singleRealTransform2=function(t,n,r){const e=this._out,o=this._data,i=o[n],a=o[n+r],s=i+a,u=i-a;e[t]=s,e[t+1]=0,e[t+2]=u,e[t+3]=0},n.prototype._singleRealTransform4=function(t,n,r){const e=this._out,o=this._data,i=this._inv?-1:1,a=2*r,s=3*r,u=o[n],c=o[n+r],l=o[n+a],f=o[n+s],_=u+l,h=u-l,p=c+f,d=i*(c-f),m=_+p,v=h,y=-d,b=_-p,g=h,x=d;e[t]=m,e[t+1]=0,e[t+2]=v,e[t+3]=y,e[t+4]=b,e[t+5]=0,e[t+6]=g,e[t+7]=x}},7417:function(t,n,r){"use strict";r.r(n),r.d(n,{StepOneAnnotator:function(){return b}});var e=r(5893),o=r(4524),i=r(915),a=r(5640),s=r(5952),u=r(7979),c=r(7294),l=r(1639),f=r(7347),_=r(4449),h=r(4815),p=r.n(h);function d(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function m(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function v(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},e=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),e.forEach((function(n){m(t,n,r[n])}))}return t}function y(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(e=r.next()).done)&&(i.push(e.value),!n||i.length!==n);a=!0);}catch(u){s=!0,o=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,n)||function(t,n){if(!t)return;if("string"===typeof t)return d(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(t){var n=t.encoderId,r=t.annotations,h=t.setAnnotations,d=t.goNextCallback,b=c.useCallback((function(t,n){var e=v({},r,m({},t,n));h(e)}),[r,h]),g=y(c.useState({}),2),x=g[0],A=g[1];c.useEffect((function(){var t={};o.rW.forEach((function(n){var e=r[n];if(void 0!==e){var o=(0,s.H)(e);t[n]=o}})),A(t)}),[r]);var S=y(c.useState(new Set),2),j=S[0],w=S[1],C=function(t){var n=document.querySelector("#audio__".concat(t));if(null!==n){var r=n;r.paused||(r.pause(),r.currentTime=0)}},O=c.useCallback((function(t){o.rW.forEach((function(n){n!==t&&C(n)}))}),[]),z=c.useCallback((function(t){w((function(n){return new Set(n.add(t))})),O(t)}),[O]),N=y(c.useState(null),2),k=N[0],P=N[1],T=y(c.useState(null),2),I=T[0],E=T[1],W=c.useCallback((function(t){O(t),function(t){var n=document.querySelector("#audio__".concat(t));if(null!==n){var r=n;r.paused&&r.play()}}(t),P(t)}),[O]),J=y(c.useState({}),2),M=J[0],F=J[1],R=c.useCallback((function(t,n){if(null!==t){var r=v({},M,m({},t,n));F(r),P(null),E(t)}}),[M]),L=c.useCallback((function(t){C(t),P(null)}),[]),X=c.useCallback((function(t,n){var r=(0,s.Z)(n);b(t,r),E(null)}),[b]),Y=c.useCallback((function(t){E(null),P(t)}),[]),q=c.useCallback((function(t){W(t)}),[W]);return(0,e.jsxs)("div",{className:p().container,children:[(0,e.jsxs)("div",{className:p().guide__section,children:[(0,e.jsx)("h2",{className:p().title,children:"\u30b9\u30c6\u30c3\u30d71-1 ~ 1-3"}),(0,e.jsxs)("p",{children:["\u5de6\u5074\u306e",o.rW.length,"\u500b\u306e\u97f3\u5404\u3005\u306b\u5bfe\u3057\u3066\u3001\u53f3\u5074\u306e\u56f3\u5f62\u306e\u4e00\u89a7\u304b\u3089\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u3082\u306e\u3092\u56de\u7b54\u3057\u3066\u4e0b\u3055\u3044\u3002"]}),(0,e.jsxs)("p",{children:["\u305f\u3060\u3057\u3001",(0,e.jsx)("span",{className:p().caution,children:"\u5168\u3066\u306e\u97f3\u3092\u4e00\u5ea6\u4ee5\u4e0a\u518d\u751f\u3057\u306a\u3044\u3068\u56f3\u5f62\u3092\u56de\u7b54\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u305b\u3093\u3002"}),(0,e.jsx)("br",{}),"\u305d\u308c\u305e\u308c\u306e\u97f3\u3092\u826f\u304f\u8074\u304d\u6bd4\u3079\u3066\u304b\u3089\u56de\u7b54\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),(0,e.jsx)("p",{children:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3057\u3066\u56f3\u5f62\u3092\u56de\u7b54\u3057\u7d42\u3048\u305f\u3089\u3001\u30da\u30fc\u30b8\u4e00\u756a\u4e0b\u306e\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})]}),(0,e.jsxs)("div",{className:p().annotate__section,children:[(0,e.jsx)("div",{className:p().annotator__section,children:o.rW.map((function(t){return(0,e.jsxs)("div",{className:p().item__container,children:[(0,e.jsx)("audio",{src:(0,u.H)("/audios/repSounds/".concat(n,"/").concat(t,".wav")),controls:!0,loop:!0,onPlay:function(){return z(t)},className:p().audio,id:"audio__".concat(t)}),k!==t&&I!==t&&void 0===x[t]&&(0,e.jsx)(l.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u958b\u59cb",onClick:function(){return W(t)},className:p().button,disabled:j.size!==o.rW.length||null!==k||null!==I}),k===t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:p().guide,children:"\u53f3\u306e\u56f3\u5f62\u306e\u4e00\u89a7\u306e\u4e2d\u304b\u3089\u3001\u3053\u306e\u97f3\u306b\u6700\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u56f3\u5f62\u3092\u4e00\u3064\u9078\u3093\u3067\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}),(0,e.jsx)(l.z,{text:"\u56f3\u5f62\u306e\u9078\u629e\u3092\u30ad\u30e3\u30f3\u30bb\u30eb",onClick:function(){return L(t)},className:"".concat(p().cancel__button," ").concat(p().button)})]}),I===t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:p().guide,children:["\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5fae\u8abf\u7bc0\u3057\u3001\u81ea\u5206\u306b\u3068\u3063\u3066\u6700\u3082\u3053\u306e\u97f3\u306b\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u3088\u3046\u306b\u56f3\u5f62\u3092\u5909\u5f62\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002",(0,e.jsx)("br",{}),"\u65e2\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u5834\u5408\u306f\u305d\u306e\u307e\u307e\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002"]}),(0,e.jsx)(_.T,{defaultShapeParams:i._[M[t]||"ss00"],confirmCallback:function(n){return X(t,n)},cancelCallback:function(){return Y(t)}})]}),void 0!==x[t]&&k!==t&&I!==t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:p().guide,children:"\u3042\u306a\u305f\u304c\u3053\u306e\u97f3\u306b\u5bfe\u5fdc\u3059\u308b\u3068\u56de\u7b54\u3057\u305f\u56f3\u5f62\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002"}),(0,e.jsx)(a.DrawSamplingPointsSketch,{canvasWidth:150,canvasHeight:150,samplingPoints:x[t]||null}),(0,e.jsx)(l.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u3084\u308a\u76f4\u3059",onClick:function(){return q(t)},className:"".concat(p().cancel__button," ").concat(p().button),disabled:j.size!==o.rW.length||null!==k||null!==I})]})]},t)}))}),(0,e.jsx)("div",{className:p().select__section,children:(0,e.jsx)(f.L,{selectCallback:function(t){return R(k,t)},disabled:null===k})})]}),(0,e.jsx)("div",{className:p().navigation__section,children:(0,e.jsx)(l.z,{text:"\u6b21\u3078",onClick:d,disabled:Object.keys(x).length!==o.rW.length,className:p().next__button})})]})}},5952:function(t,n,r){"use strict";r.d(n,{H:function(){return f},Z:function(){return l}});var e=r(9645),o=r.n(e),i=r(4035),a=r.n(i);function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function u(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return s(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=2e3,l=function(t){var n=t.cornNum,r=t.cornAmp,e=t.randomness,o=t.randomSeed,i=t.outerCurve,s=t.innerCurve,c=new(a())((function(){})),l=p({p:c,cornNum:n,cornAmp:r,randomness:e,randomSeed:o,innerCurve:s,outerCurve:i}),f=l.samplingPointsX,_=l.samplingPointsY,h=d(f),m=d(_);return u(h).concat(u(m))},f=function(t){var n=t.length/4,r=t.slice(0,2*n),e=t.slice(2*n),o=m(r),i=m(e);return o.map((function(t,n){return[t,i[n]]}))},_=function(t){for(var n=t.p,r=t.bezierOperator,e=0,o=r[0].x,i=r[0].y,a=o,s=i,u=Array(2001),l=0;l<=c;l++)a=n.bezierPoint(r[0].x,r[1].x,r[2].x,r[3].x,l/c),s=n.bezierPoint(r[0].y,r[1].y,r[2].y,r[3].y,l/c),e+=n.dist(o,i,a,s),u[l]=e,o=a,i=s;return u},h=function(t){for(var n=t.p,r=t.bezierOperator,e=t.distArray,o=t.offset,i=t.segmentL,a=0,s=[],u=[],l=0;l<=c;l++)if(e[l]>=i*a+o){var f=n.bezierPoint(r[0].x,r[1].x,r[2].x,r[3].x,l/c),_=n.bezierPoint(r[0].y,r[1].y,r[2].y,r[3].y,l/c);s.push(f),u.push(_),a+=1}return{pointsX:s,pointsY:u,rest:o+a*i-e[2e3]}},p=function(t){var n=t.p,r=t.cornNum,e=t.cornAmp,o=t.randomness,i=t.randomSeed,a=t.outerCurve,s=t.innerCurve;n.randomSeed(i);for(var c=Array(2*r),l=Array(2*r),f=0;f<2*r;f++)c[f]=1*(1+e*n.pow(-1,f)+o*n.random(-1,1)*.4),l[f]=n.PI*f/r-n.PI/2+o*n.random(-1,1)*n.PI/r;for(var p=Array(2*r),d=Array(2*r),m=0;m<2*r;m++){var v=m,y=(m+1)%(2*r),b=c[v]*n.cos(l[v]),g=c[v]*n.sin(l[v]),x=c[y]*n.cos(l[y]),A=c[y]*n.sin(l[y]),S=n.createVector(-g,b).normalize(),j=n.createVector(A,-x).normalize(),w=void 0;v%2==0?(w=[{x:b,y:g},{x:b+.5*a*S.x,y:g+.5*a*S.y},{x:x+.5*s*j.x,y:A+.5*s*j.y},{x:x,y:A}],p[m]=w,d[m]=_({p:n,bezierOperator:w})):(w=[{x:b,y:g},{x:b+.5*s*S.x,y:g+.5*s*S.y},{x:x+.5*a*j.x,y:A+.5*a*j.y},{x:x,y:A}],p[m]=w,d[m]=_({p:n,bezierOperator:w}))}var C=0;d.forEach((function(t){return C+=t[2e3]}));for(var O=C/512,z=0,N=[],k=[],P=0;P<2*r;P++){var T=h({p:n,bezierOperator:p[P],distArray:d[P],offset:z,segmentL:O}),I=T.pointsX,E=T.pointsY,W=T.rest;N=u(N).concat(u(I)),k=u(k).concat(u(E)),z=W}for(;N.length>512;)N.pop(),k.pop();return{samplingPointsX:N,samplingPointsY:k}},d=function(t){var n=new(o())(t.length),r=n.toComplexArray(t,null),e=n.createComplexArray();return n.transform(e,r),e},m=function(t){var n=t.length/2,r=new(o())(n),e=r.createComplexArray();return r.inverseTransform(e,t),r.fromComplexArray(e,null)}},4815:function(t){t.exports={container:"StepOneAnnotator_container__F0Yz2",guide__section:"StepOneAnnotator_guide__section__LOhpS",annotate__section:"StepOneAnnotator_annotate__section__NNOMJ",annotator__section:"StepOneAnnotator_annotator__section__buMEJ",select__section:"StepOneAnnotator_select__section__iuiqN",item__container:"StepOneAnnotator_item__container__JcWnC",title:"StepOneAnnotator_title__JSJvm",caution:"StepOneAnnotator_caution__ERtge",audio:"StepOneAnnotator_audio__u_Iup",guide:"StepOneAnnotator_guide__5I7J7",button__section:"StepOneAnnotator_button__section__f7LV9",button:"StepOneAnnotator_button__1unq1",cancel__button:"StepOneAnnotator_cancel__button__GJXjh",navigation__section:"StepOneAnnotator_navigation__section__RZP1g",next__button:"StepOneAnnotator_next__button__CueS3"}}}]);