(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{8312:function(n,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5970)}])},1639:function(n,r,t){"use strict";t.d(r,{z:function(){return u}});var e=t(5893),o=t(7294),a=t(1314),i=t.n(a),u=o.memo((function(n){var r=n.text,t=n.className,o=n.onClick,a=n.disabled,u=void 0!==a&&a;return(0,e.jsx)("button",{onClick:o,className:"".concat(i().button__basic," ").concat(t||""),disabled:u,children:r})}))},4524:function(n,r,t){"use strict";t.d(r,{Pg:function(){return o},gu:function(){return a},rW:function(){return e}});var e=["rs1_00","rs1_01","rs1_02"],o=["rs1_00","rs1_01","rs1_02","rs2_00","rs2_01","rs2_02","rs2_03","rs2_04","rs2_05","rs2_06","rs2_07","rs2_08","rs2_09","rs2_10","rs2_11","rs2_12","rs2_13","rs2_14","rs2_15","rs2_16","rs2_17","rs2_18","rs2_19","rs2_20","rs2_21","rs2_22","rs2_23","rs2_24","rs2_25","rs2_26","rs2_27","rs2_28","rs2_29"],a={rs1_00:[2.1120596,-5.1291986],rs1_01:[1.5762187,2.60493],rs1_02:[-2.382232,.10038004],rs2_00:[2.5993729,-1.2009252],rs2_01:[-.94393796,-3.1945283],rs2_02:[.30973345,.21844022],rs2_03:[3.47645,1.0034096],rs2_04:[1.4669484,-3.0503924],rs2_05:[-.88771594,-1.2711746],rs2_06:[.83919644,-1.4324392],rs2_07:[1.8265278,.890573],rs2_08:[-1.0803591,1.0704242],rs2_09:[.2325852,-2.6102617],rs2_10:[.6404754,1.698138],rs2_11:[1.4612306,-.3326639],rs2_12:[2.6401613,1.8669294],rs2_13:[-1.0652071,-.106734954],rs2_14:[2.209707,-3.9786203],rs2_15:[2.5716124,-.07289239],rs2_16:[-1.5073073,-2.1868656],rs2_17:[.029848829,-.78534675],rs2_18:[1.55066,-2.0992553],rs2_19:[-.12433945,1.0623416],rs2_20:[-.06967662,-1.7259902],rs2_21:[1.2427349,-3.9178205],rs2_22:[1.7086548,-1.2185427],rs2_23:[-1.9910475,.89425653],rs2_24:[-1.8384401,-.5902677],rs2_25:[-.6483803,-2.3826134],rs2_26:[1.1159008,.4414356],rs2_27:[.52229494,-3.384752],rs2_28:[2.6333241,.76941025],rs2_29:[1.7951645,1.6901001]}},9497:function(n,r,t){"use strict";t.d(r,{Dy:function(){return q},sq:function(){return H}});var e=t(9645),o=t.n(e);function a(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}function u(n){if(Array.isArray(n))return n}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(n,r){return u(n)||function(n,r){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var e,o,a=[],i=!0,u=!1;try{for(t=t.call(n);!(i=(e=t.next()).done)&&(a.push(e.value),!r||a.length!==r);i=!0);}catch(s){u=!0,o=s}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(n,r)||f(n,r)||s()}function c(n){return u(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||f(n,i)||s()}function f(n,r){if(n){if("string"===typeof n)return a(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(n,r):void 0}}var h,_,d=function(n,r){return[n.map((function(n){return N(j(n),r)})),n[0].length-1]},g=function(n,r){var t=r.nFft||2048,e=r.winLength||t,o=r.hopLength||Math.floor(e/4),a=S(e);a=y(a,t),r.center&&(n=b(n,Math.floor(t/2)));for(var i=x(n,t,o),u=[],s=i.length,l=t+2,c=0;c<s;c++){var f=new Float32Array(l);u[c]=f}for(var h=0;h<s;h++){var _=p(i[h],a),d=M(_);u[h].set(d.slice(0,l))}return u},v=function(n,r){for(var t=[],e=0;e<n.length;e++)t[e]=m(n[e],r);return t},m=function(n,r){if(n.length!==r[0].length)throw new Error("Each entry in filterbank should have dimensions "+"matching FFT. |mags| = ".concat(n.length,", ")+"|filterbank[0]| = ".concat(r[0].length,"."));for(var t=new Float32Array(r.length),e=0;e<r.length;e++){var o=p(n,r[e]);t[e]=o.reduce((function(n,r){return n+r}))}return t},p=function(n,r){for(var t=new Float32Array(n.length),e=0;e<n.length;e++)t[e]=r[e]*n[e];return t},y=function(n,r){if(n.length>r)throw new Error("Data is longer than length.");var t=Math.floor((r-n.length)/2),e=r-n.length-t;return w(n,[t,e])},w=function(n,r){var t,e,o;"object"===typeof r?(t=(o=l(r,2))[0],e=o[1]):t=e=r;var a=new Float32Array(n.length+t+e);return a.set(n,t),a},b=function(n,r){for(var t=w(n,r),e=0;e<r;e++)t[e]=t[2*r-e],t[t.length-e-1]=t[t.length-2*r+e-1];return t},x=function(n,r,t){for(var e=Math.floor((n.length-r)/t)+1,o=Array.from({length:e},(function(n,t){return new Float32Array(r)})),a=0;a<e;a++){var i=a*t,u=n.slice(i,i+r);o[a].set(u),u.length}return o},A=function(n){for(var r=function(n){var r=2/(u[2+n]-u[n]);f[n]=f[n].map((function(n){return n*r}))},t=n.fMin||0,e=n.fMax||n.sampleRate/2,o=n.nMels||128,a=n.nFft||2048,i=C(n.sampleRate,a),u=P(o+2,t,e),s=E(u),l=I(u,i),c=l[0].length,f=[],h=0;h<o;h++){f[h]=new Float32Array(c);for(var _=0;_<l[h].length;_++){var d=-l[h][_]/s[h],g=l[h+2][_]/s[h+1],v=Math.max(0,Math.min(d,g));f[h][_]=v}}for(var m=0;m<f.length;m++)r(m);return f},M=function(n){var r=new(o())(n.length),t=r.createComplexArray(),e=r.toComplexArray(n,null);return r.transform(t,e),t},S=function(n){for(var r=new Float32Array(n),t=0;t<n;t++)r[t]=.5*(1-Math.cos(2*Math.PI*t/(n-1)));return r},F=function(n,r,t){for(var e=(r-n)/(t-1),o=new Float32Array(t),a=0;a<t;a++)o[a]=n+e*a;return o},j=function(n){for(var r=new Float32Array(n.length/2),t=0;t<n.length/2;t++)r[t]=Math.sqrt(n[2*t]*n[2*t]+n[2*t+1]*n[2*t+1]);return r},O=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)return 2595*Math.log10(1+n/700);var t=0,e=200/3,o=(n-t)/e,a=1e3,i=(a-t)/e,u=Math.log(6.4)/27;return n>=a&&(o=i+Math.log(n/a)/u),o},C=function(n,r){return F(0,n/2,Math.floor(1+r/2))},P=function(n,r,t){var e=O(r),o=O(t),a=F(e,o,n).map((function(n){return function(n){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return 700*(Math.exp(n/1125)-1);var r=0,t=200/3,e=r+t*n,o=1e3,a=(o-r)/t,i=Math.log(6.4)/27;return n>=a&&(e=o*Math.exp(i*(n-a))),e}(n)}));return a},E=function(n){for(var r=new Float32Array(n.length-1),t=0;t<n.length;t++)r[t]=n[t+1]-n[t];return r},I=function(n,r){for(var t=[],e=0;e<n.length;e++)t[e]=new Float32Array(r.length);for(var o=0;o<n.length;o++)for(var a=0;a<r.length;a++)t[o][a]=n[o]-r[a];return t},N=function(n,r){return n.map((function(n){return Math.pow(n,r)}))},T=function(n){return n.reduce((function(n,r){return Math.max(n,r)}))},k=function(n){return n.reduce((function(n,r){return Math.min(n,r)}))},z=function(n){return n.reduce((function(n,r){return n+r}))/n.length},R=t(2230),L=function(n){return function(r){var t=r.map((function(n){return Array.from(n)})),e=R.odF(t),o=R.VV$(e),a=R.Fp7(e),i=R.hiC(R.luU(e,o),R.luU(a,o)),u=R.p4s(i);return R.XLQ(u,n)}},q={encoderMode:"SHORT",isFlipped:!0,encoderJSONPath:"/models/encoder01/model.json",samplingRate:44100,frameLength:1024,encoderPreprocessor:(h=1024,_=[1,32,16,1],function(n){var r=function(n){for(var r=new Float32Array(n.length),t=k(n),e=(T(n)-t)/2+1e-5,o=z(n),a=0;a<n.length;a++)r[a]=(n[a]-o)/e;return r}(n),t=function(n,r){var t=g(n,r),e=c(d(t,1)),o=e[0];return e.slice(1),o}(r,{nFft:h})[0],e=R.RRF(t),o=R.hiC(e,R.iD$(h)),a=R.tPi(o,1,h/2);return R.XLQ(a,_)}),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder01.png",xmin:-.002,xmax:.0025,ymin:-.004,ymax:.004}},H=(function(n,r,t,e){}(44100,2048,1024,[1,128,64,1]),{encoderMode:"LONG_FAST",isFlipped:!0,encoderJSONPath:"/models/encoder02_long/model.json",samplingRate:44100,frameLength:2048,encoderPreprocessor:L([1,128,64,1]),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder02_long.png",xmin:-3,xmax:4,ymin:-4.5,ymax:3}});L([1,128,64,1])},5970:function(n,r,t){"use strict";t.r(r);var e=t(5893),o=t(1639),a=t(560),i=t(9497),u=t(5968),s=t(5152),l=t.n(s),c=t(1163),f=t(7294),h=t(7844),_=t.n(h),d=t(5848),g=t.n(d);function v(n,r){(null==r||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}function m(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var e,o,a=[],i=!0,u=!1;try{for(t=t.call(n);!(i=(e=t.next()).done)&&(a.push(e.value),!r||a.length!==r);i=!0);}catch(s){u=!0,o=s}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return v(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=l()((function(){return Promise.all([t.e(6006),t.e(4873),t.e(3618),t.e(2142),t.e(2636)]).then(t.bind(t,2264)).then((function(n){return n.AudioVisualizer}))}),{loadableGenerated:{webpack:function(){return[2264]}},ssr:!1});r.default=function(){var n=(0,c.useRouter)(),r=m(_()(a.u.ANNOTATIONS,{}),1)[0],t=m(_()(a.u.CORRECT_ESTIMATION_HISTORY,[]),1)[0],s=(0,u.n)(t),l=f.useCallback((function(){n.push("/settingshape")}),[n]),h=f.useCallback((function(){n.push("/microphone")}),[n]);return(0,e.jsxs)("div",{className:g().container,children:[(0,e.jsx)("h1",{children:"TimMorph"}),(0,e.jsx)("h3",{className:g().caution,children:"Only Chrome is supported. Other browsers are not recommended."}),s?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:g().button__section,children:[(0,e.jsx)(o.z,{text:"\u30de\u30a4\u30af\u3092\u4f7f\u3063\u3066\u4f53\u9a13\u3059\u308b",onClick:h,className:g().confirm__button}),(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b",onClick:l})]}),(0,e.jsxs)("div",{className:g().main__content,children:[(0,e.jsx)(p,{audioFilePath:"/audios/beginner.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:r,title:"beginner"}),(0,e.jsx)(p,{audioFilePath:"/audios/intermediate.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:r,title:"intermediate"}),(0,e.jsx)(p,{audioFilePath:"/audios/expert.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:r,title:"expert1"}),(0,e.jsx)(p,{audioFilePath:"/audios/kidokoro.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:r,title:"expert2"})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"It seems you have not finished shape setting."}),(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3059\u308b",onClick:l})]})]})}},5968:function(n,r,t){"use strict";t.d(r,{n:function(){return o}});var e=t(4524),o=function(n){var r=function(n){for(var r=0,t=n.length-1;t>=0;t--){if("CORRECT"!==n[t][1])return r;r+=1}return r}(n);return r>=3||n.length===e.Pg.length-3}},1314:function(n){n.exports={button__basic:"Button_button__basic__5C4_V"}},5848:function(n){n.exports={container:"TopPage_container__zilsm",caution:"TopPage_caution__2wd_5",main__content:"TopPage_main__content__iOn10",button__section:"TopPage_button__section__O5cKb"}},7844:function(n,r,t){"use strict";var e=this&&this.__assign||function(){return e=Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0});var o=t(7294);r.default=function(n,r,t){var a=o.useMemo((function(){return e({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},t)}),[t]),i=a.serializer,u=a.parser,s=a.logger,l=a.syncData,c=o.useState((function(){if("undefined"===typeof window)return r;try{var t=window.localStorage.getItem(n);return t?u(t):r}catch(e){return s(e),r}})),f=c[0],h=c[1];return o.useEffect((function(){if("undefined"!==typeof window){try{void 0!==f?window.localStorage.setItem(n,i(f)):window.localStorage.removeItem(n)}catch(r){s(r)}}}),[f]),o.useEffect((function(){if(l){var r=function(r){if(r.key===n&&r.storageArea===window.localStorage)try{h(r.newValue?u(r.newValue):void 0)}catch(r){s(r)}};if("undefined"!==typeof window)return window.addEventListener("storage",r),function(){return window.removeEventListener("storage",r)}}}),[n,l]),[f,h]}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},function(n){n.O(0,[864,2723,3132,5974,904,1642,1815,9774,2888,179],(function(){return r=8312,n(n.s=r);var r}));var r=n.O();_N_E=r}]);