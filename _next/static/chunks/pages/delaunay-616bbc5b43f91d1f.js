(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{9393:function(t,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/delaunay",function(){return n(3963)}])},3963:function(t,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var i=n(5893),e=n(1029),a=n(6951),o=function(t,r,n,i){for(var o=t.length,l=r.length,s=n.map((function(r){return r.map((function(r,n){return r-t[n]}))})),u=s.map((function(t){var r=t.reduce((function(t,r){return t+r*r}),0);return 0===r?1:1/r})),c=i.map((function(t){return t.map((function(t,n){return t-r[n]}))})),f=new Array(o).fill(0).map((function(){return new Array(o).fill(0)})),h=new Array(l).fill(0).map((function(){return new Array(o).fill(0)})),p=0;p<n.length;p++){for(var d=0;d<o;d++)for(var m=0;m<o;m++)f[d][m]+=u[p]*s[p][m]*s[p][d];for(var v=0;v<l;v++)for(var y=0;y<o;y++)h[v][y]+=u[p]*s[p][y]*c[p][v]}var _=new e.Z(f),x=new e.Z(h),g=(0,a.S)(_,!0);return x.mmul(g).to2DArray()},l=n(1568),s=n(2055);var u=function(){function t(r,n){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.inputDim=r,this.outputDim=n,this.points=[],this.vectors=[],this.simplexPointIds=[],this.simplexVectors=[],this.hullFacetPointIds=[],this.hullFacetVectors=[],this.simplexTransforms=[],this.hullFacetJacobians=[]}var r=t.prototype;return r.addPoint=function(t,r){this.points.push(t),this.vectors.push(r),this._updateDelaunay(),this._updateSimplexTransforms(),this._updateHullFacetJacobians()},r.estimate=function(t){var r=this._findSimplex(t),n=r.iSimplex,i=r.barycentricCoordInSimplex;if(n>=0)return this._linearInterpolateVector(i,this.simplexVectors[n]);var e=this._findNearestFacet(t),a=e.iFacet,o=e.barycentricCoordOfNearestPoint,l=e.ordinaryCoordOfNearestPoint,u=this._linearInterpolateVector(o,this.hullFacetVectors[a]),c=this._linearInterpolateMatrix(o,this.hullFacetJacobians[a]),f=s.$XF(t,l);return this._firstOrderApproximation(u,c,f)},r._updateDelaunay=function(){if(2===this.inputDim){for(var t=l.Z.from(this.points),r=t.triangles,n=[],i=[],e=0;e<r.length;e+=3)n.push([r[e],r[e+1],r[e+2]]),i.push([this.vectors[r[e]],this.vectors[r[e+1]],this.vectors[r[e+2]]]);var a=t.hull,o=[],s=[];if(a.length<this.inputDim+1){var u=this;o.push(Array.from(a)),s.push(Array.from(a).map((function(t){return u.vectors[t]})))}else for(var c=0;c<a.length;c++)o.push([a[c],a[(c+1)%a.length]]),s.push([this.vectors[a[c]],this.vectors[a[(c+1)%a.length]]]);return this.simplexPointIds=n,this.simplexVectors=i,this.hullFacetPointIds=o,void(this.hullFacetVectors=s)}},r._updateSimplexTransforms=function(){for(var t=this,r=function(r){for(var i=t,o=new Array(t.inputDim+1).fill(0).map((function(){return new Array(i.inputDim).fill(0)})),l=0;l<t.inputDim;l++)o[t.inputDim][l]=t.points[t.simplexPointIds[r][t.inputDim]][l];for(var s=new Array(t.inputDim).fill(0).map((function(){return new Array(i.inputDim).fill(0)})),u=0;u<t.inputDim;u++)for(var c=0;c<t.inputDim;c++)s[u][c]=t.points[t.simplexPointIds[r][c]][u]-t.points[t.simplexPointIds[r][t.inputDim]][u];for(var f=new e.Z(s),h=(0,a.S)(f,!0).to2DArray(),p=0;p<t.inputDim;p++)for(var d=0;d<t.inputDim;d++)o[p][d]=h[p][d];n.push(o)},n=[],i=0;i<this.simplexPointIds.length;i++)r(i);this.simplexTransforms=n},r._updateHullFacetJacobians=function(){for(var t=[],r=0;r<this.hullFacetPointIds.length;r++){for(var n=[],i=this.hullFacetPointIds[r],e=0;e<i.length;e++){var a=this,l=i[e],s=this._findAdjPointIds(l),u=[],c=[];s.forEach((function(t){u.push(a.points[t]),c.push(a.vectors[t])}));var f=o(this.points[l],this.vectors[l],u,c);n.push(f)}t.push(n)}this.hullFacetJacobians=t},r._findAdjPointIds=function(t){var r=new Set;return 0===this.simplexPointIds.length?this.points.forEach((function(n,i){i!==t&&r.add(i)})):this.simplexPointIds.forEach((function(n){new Set(n).has(t)&&n.forEach((function(n){n!==t&&r.add(n)}))})),r},r._findSimplex=function(t){for(var r=1e-5,n=0;n<this.simplexPointIds.length;n++){for(var i=this._calcBarycentricCoordInSimplex(t,n),e=!0,a=0;a<i.length;a++)(i[a]<-r||i[a]>1+r)&&(e=!1);if(e)return{iSimplex:n,barycentricCoordInSimplex:i}}return{iSimplex:-1,barycentricCoordInSimplex:[]}},r._findNearestFacet=function(t){for(var r=1/0,n=-1,i=[],e=[],a=0;a<this.hullFacetPointIds.length;a++){var o=this._calcBarycentricCoordOfNearestPointInFacet(t,a),l=this._calcOrdinaryCoordFromBarycentricCoordInFacet(o,a),u=s.KOy(s.$XF(t,l));u<r&&(r=u,n=a,i=o,e=l)}return{iFacet:n,barycentricCoordOfNearestPoint:i,ordinaryCoordOfNearestPoint:e}},r._calcBarycentricCoordOfNearestPointInFacet=function(t,r){var n=this,i=this.hullFacetPointIds[r].length;if(1===i)return[1];for(var e=new Array(i-1).fill(0).map((function(t,e){return s.$XF(n.points[n.hullFacetPointIds[r][e]],n.points[n.hullFacetPointIds[r][i-1]])})),a=s.$XF(t,this.points[this.hullFacetPointIds[r][i-1]]),o=new Array(i-1).fill(0).map((function(){return new Array(i-1)})),l=0;l<i-1;l++)for(var u=0;u<i-1;u++)o[l][u]=s.AKD(e[l],e[u]);for(var c=new Array(i-1).fill(0),f=0;f<i-1;f++)c[f]=s.AKD(e[f],a);var h=s.JpY(s.JBn(o),c),p=new Array(i).fill(0);p[i-1]=1;for(var d=0;d<i-1;d++)p[d]=Math.min(Math.max(h[d],0),1),p[i-1]-=p[d];return p},r._calcOrdinaryCoordFromBarycentricCoordInFacet=function(t,r){var n=this,i=this.hullFacetPointIds[r].map((function(t){return n.points[t]}));return this._linearInterpolateVector(t,i)},r._calcBarycentricCoordInSimplex=function(t,r){var n=t.length,i=new Array(n+1).fill(0);i[n]=1;for(var e=this.simplexTransforms[r],a=0;a<n;a++){for(var o=0;o<n;o++)i[a]+=e[a][o]*(t[o]-e[n][o]);i[n]-=i[a]}return i},r._linearInterpolateVector=function(t,r){var n=t.length;if(0===n)return[];for(var i=r[0].length,e=new Array(i).fill(0),a=0;a<i;a++)for(var o=0;o<n;o++)e[a]+=t[o]*r[o][a];return e},r._linearInterpolateMatrix=function(t,r){var n=t.length;if(0===n)return[];for(var i=r[0].length,e=r[0][0].length,a=new Array(i).fill(0).map((function(){return new Array(e).fill(0)})),o=0;o<i;o++)for(var l=0;l<e;l++)for(var s=0;s<n;s++)a[o][l]+=t[s]*r[s][o][l];return a},r._firstOrderApproximation=function(t,r,n){return s.IHx(t,s.JpY(r,n))},t}(),c=n(5152),f=n.n(c),h=n(7294),p=n(5150),d=n.n(p);function m(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function v(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,e,a=[],o=!0,l=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(a.push(i.value),!r||a.length!==r);o=!0);}catch(s){l=!0,e=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw e}}return a}}(t,r)||function(t,r){if(!t)return;if("string"===typeof t)return m(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=f()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1,loading:function(){return(0,i.jsx)("p",{className:d().loading__text,children:"Loading..."})}}),_=new Array(21).fill(0).map((function(t,r){return r-10})),x=new Array(21).fill(0).map((function(t,r){return r-10})),g=new Array(_.length).fill(0).map((function(){return new Array(x.length).fill(0)})),w=function(){var t=v(h.useState(null),2),r=t[0],n=t[1],e=v(h.useState(g),2),a=e[0],o=e[1];h.useEffect((function(){var t=new u(2,1);n(t)}),[]);var l=h.useCallback((function(){if(null!==r){var t=10*Math.random()-5,n=10*Math.random()-5,i=(t*t+n*n)/100;r.addPoint([t,n],[i]);for(var e=new Array(_.length).fill(0).map((function(){return new Array(x.length).fill(0)})),a=0;a<_.length;a++)for(var l=0;l<x.length;l++){var s=_[a],u=x[l];e[a][l]=r.estimate([s,u])[0]}o(e)}}),[r]);return(0,i.jsxs)("div",{className:d().container,children:[(0,i.jsx)("h1",{className:d().title,children:"Delaunay Estimator Demo"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Ground Truth : z = ( x * x + y * y ) / 100"}),(0,i.jsxs)("p",{children:["By clicking ",(0,i.jsx)("b",{children:"Add Point"})," button, one sample point is randomly added from the range -5 < x < 5, -5 < y < 5."]})]}),(0,i.jsxs)("div",{className:d().figure__container,children:[(0,i.jsx)(y,{data:[{type:"surface",x:_,y:x,z:a}],layout:{width:600,height:600,margin:{t:20,b:20,r:0,l:0}}}),(0,i.jsx)("button",{className:d().add__button,onClick:l,children:"Add Point"})]})]})}},5150:function(t){t.exports={container:"DelaunayDemo_container__hZp2_",title:"DelaunayDemo_title__pQT5G",figure__container:"DelaunayDemo_figure__container__hKCRq",add__button:"DelaunayDemo_add__button__p0BMA",loading__text:"DelaunayDemo_loading__text__avRc8"}},2007:function(){}},function(t){t.O(0,[152,873,774,888,179],(function(){return r=9393,t(t.s=r);var r}));var r=t.O();_N_E=r}]);