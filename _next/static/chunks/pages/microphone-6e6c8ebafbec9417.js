(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{6432:function(r,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/microphone",function(){return t(6434)}])},1639:function(r,n,t){"use strict";t.d(n,{z:function(){return s}});var e=t(5893),o=t(7294),a=t(1314),i=t.n(a),s=o.memo((function(r){var n=r.text,t=r.className,o=r.onClick,a=r.disabled,s=void 0!==a&&a;return(0,e.jsx)("button",{onClick:o,className:"".concat(i().button__basic," ").concat(t||""),disabled:s,children:n})}))},4524:function(r,n,t){"use strict";t.d(n,{Pg:function(){return o},lZ:function(){return a},rW:function(){return e}});var e=["rs1_00","rs1_01","rs1_02"],o=["rs1_00","rs1_01","rs1_02","rs2_00","rs2_01","rs2_02","rs2_03","rs2_04","rs2_05","rs2_06","rs2_07","rs2_08","rs2_09","rs2_10","rs2_11","rs2_12","rs2_13","rs2_14","rs2_15","rs2_16","rs2_17","rs2_18","rs2_19","rs2_20","rs2_21","rs2_22","rs2_23","rs2_24","rs2_25","rs2_26","rs2_27","rs2_28","rs2_29"],a={encoder02_long:{rs1_00:[2.1120596,-5.1291986],rs1_01:[1.5762187,2.60493],rs1_02:[-2.382232,.10038004],rs2_00:[2.5993729,-1.2009252],rs2_01:[-.94393796,-3.1945283],rs2_02:[.30973345,.21844022],rs2_03:[3.47645,1.0034096],rs2_04:[1.4669484,-3.0503924],rs2_05:[-.88771594,-1.2711746],rs2_06:[.83919644,-1.4324392],rs2_07:[1.8265278,.890573],rs2_08:[-1.0803591,1.0704242],rs2_09:[.2325852,-2.6102617],rs2_10:[.6404754,1.698138],rs2_11:[1.4612306,-.3326639],rs2_12:[2.6401613,1.8669294],rs2_13:[-1.0652071,-.106734954],rs2_14:[2.209707,-3.9786203],rs2_15:[2.5716124,-.07289239],rs2_16:[-1.5073073,-2.1868656],rs2_17:[.029848829,-.78534675],rs2_18:[1.55066,-2.0992553],rs2_19:[-.12433945,1.0623416],rs2_20:[-.06967662,-1.7259902],rs2_21:[1.2427349,-3.9178205],rs2_22:[1.7086548,-1.2185427],rs2_23:[-1.9910475,.89425653],rs2_24:[-1.8384401,-.5902677],rs2_25:[-.6483803,-2.3826134],rs2_26:[1.1159008,.4414356],rs2_27:[.52229494,-3.384752],rs2_28:[2.6333241,.76941025],rs2_29:[1.7951645,1.6901001]},encoder01_new:{rs1_00:[-4.072672367095947,.45526790618896484],rs1_01:[.32174909114837646,-2.813951015472412],rs1_02:[.9046091437339783,2.4331021308898926],rs2_00:[2.5847606658935547,-.49226003885269165],rs2_01:[-.8621997237205505,-.06345125287771225],rs2_02:[-2.794252634048462,-1.507372260093689],rs2_03:[.9713488221168518,.5357136726379395],rs2_04:[-1.074597716331482,-1.785327672958374],rs2_05:[.9364224672317505,-1.195607304573059],rs2_06:[-.5988777875900269,1.6250923871994019],rs2_07:[-2.590866804122925,-.0029229307547211647],rs2_08:[-.3286362290382385,2.8959856033325195],rs2_09:[1.7813211679458618,1.509926676750183],rs2_10:[-3.7487051486968994,-.6548757553100586],rs2_11:[-.2063778042793274,-1.0120549201965332],rs2_12:[1.3077027797698975,-2.2499568462371826],rs2_13:[-1.8456045389175415,-.9317305088043213],rs2_14:[2.276038408279419,.546301543712616],rs2_15:[-.0860101506114006,.6741936206817627],rs2_16:[1.545392394065857,-.34135901927948],rs2_17:[.5588621497154236,1.4700626134872437],rs2_18:[-1.2781132459640503,.8780043125152588],rs2_19:[1.9687553644180298,-1.2798967361450195],rs2_20:[.48709386587142944,-.316179096698761],rs2_21:[.24286049604415894,-1.860565185546875],rs2_22:[-3.1833784580230713,.6764126420021057],rs2_23:[-.41531845927238464,-2.4058446884155273],rs2_24:[.08604799956083298,2.1650567054748535],rs2_25:[-1.0213197469711304,-.8897984623908997],rs2_26:[-2.950563669204712,-.7190233469009399],rs2_27:[-3.3235528469085693,-.04947268217802048],rs2_28:[-.7898940443992615,2.344667434692383],rs2_29:[-.15450313687324524,-.027127526700496674]}}},9497:function(r,n,t){"use strict";t.d(n,{Yu:function(){return H},Dy:function(){return D},sq:function(){return V}});var e=t(9645),o=t.n(e);function a(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}function s(r){if(Array.isArray(r))return r}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(r,n){return s(r)||function(r,n){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,o,a=[],i=!0,s=!1;try{for(t=t.call(r);!(i=(e=t.next()).done)&&(a.push(e.value),!n||a.length!==n);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(r,n)||f(r,n)||u()}function l(r){return s(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||f(r,i)||u()}function f(r,n){if(r){if("string"===typeof r)return a(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(r,n):void 0}}var _,h,d=function(r,n){return[r.map((function(r){return P(F(r),n)})),r[0].length-1]},g=function(r,n){var t=n.nFft||2048,e=n.winLength||t,o=n.hopLength||Math.floor(e/4),a=S(e);a=y(a,t),n.center&&(r=b(r,Math.floor(t/2)));for(var i=x(r,t,o),s=[],u=i.length,c=t+2,l=0;l<u;l++){var f=new Float32Array(c);s[l]=f}for(var _=0;_<u;_++){var h=p(i[_],a),d=M(h);s[_].set(d.slice(0,c))}return s},m=function(r,n){for(var t=[],e=0;e<r.length;e++)t[e]=v(r[e],n);return t},v=function(r,n){if(r.length!==n[0].length)throw new Error("Each entry in filterbank should have dimensions "+"matching FFT. |mags| = ".concat(r.length,", ")+"|filterbank[0]| = ".concat(n[0].length,"."));for(var t=new Float32Array(n.length),e=0;e<n.length;e++){var o=p(r,n[e]);t[e]=o.reduce((function(r,n){return r+n}))}return t},p=function(r,n){for(var t=new Float32Array(r.length),e=0;e<r.length;e++)t[e]=n[e]*r[e];return t},y=function(r,n){if(r.length>n)throw new Error("Data is longer than length.");var t=Math.floor((n-r.length)/2),e=n-r.length-t;return w(r,[t,e])},w=function(r,n){var t,e,o;"object"===typeof n?(t=(o=c(n,2))[0],e=o[1]):t=e=n;var a=new Float32Array(r.length+t+e);return a.set(r,t),a},b=function(r,n){for(var t=w(r,n),e=0;e<n;e++)t[e]=t[2*n-e],t[t.length-e-1]=t[t.length-2*n+e-1];return t},x=function(r,n,t){for(var e=Math.floor((r.length-n)/t)+1,o=Array.from({length:e},(function(r,t){return new Float32Array(n)})),a=0;a<e;a++){var i=a*t,s=r.slice(i,i+n);o[a].set(s),s.length}return o},A=function(r){for(var n=function(r){var n=2/(s[2+r]-s[r]);f[r]=f[r].map((function(r){return r*n}))},t=r.fMin||0,e=r.fMax||r.sampleRate/2,o=r.nMels||128,a=r.nFft||2048,i=O(r.sampleRate,a),s=C(o+2,t,e),u=N(s),c=E(s,i),l=c[0].length,f=[],_=0;_<o;_++){f[_]=new Float32Array(l);for(var h=0;h<c[_].length;h++){var d=-c[_][h]/u[_],g=c[_+2][h]/u[_+1],m=Math.max(0,Math.min(d,g));f[_][h]=m}}for(var v=0;v<f.length;v++)n(v);return f},M=function(r){var n=new(o())(r.length),t=n.createComplexArray(),e=n.toComplexArray(r,null);return n.transform(t,e),t},S=function(r){for(var n=new Float32Array(r),t=0;t<r;t++)n[t]=.5*(1-Math.cos(2*Math.PI*t/(r-1)));return n},j=function(r,n,t){for(var e=(n-r)/(t-1),o=new Float32Array(t),a=0;a<t;a++)o[a]=r+e*a;return o},F=function(r){for(var n=new Float32Array(r.length/2),t=0;t<r.length/2;t++)n[t]=Math.sqrt(r[2*t]*r[2*t]+r[2*t+1]*r[2*t+1]);return n},I=function(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n)return 2595*Math.log10(1+r/700);var t=0,e=200/3,o=(r-t)/e,a=1e3,i=(a-t)/e,s=Math.log(6.4)/27;return r>=a&&(o=i+Math.log(r/a)/s),o},O=function(r,n){return j(0,r/2,Math.floor(1+n/2))},C=function(r,n,t){var e=I(n),o=I(t),a=j(e,o,r).map((function(r){return function(r){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return 700*(Math.exp(r/1125)-1);var n=0,t=200/3,e=n+t*r,o=1e3,a=(o-n)/t,i=Math.log(6.4)/27;return r>=a&&(e=o*Math.exp(i*(r-a))),e}(r)}));return a},N=function(r){for(var n=new Float32Array(r.length-1),t=0;t<r.length;t++)n[t]=r[t+1]-r[t];return n},E=function(r,n){for(var t=[],e=0;e<r.length;e++)t[e]=new Float32Array(n.length);for(var o=0;o<r.length;o++)for(var a=0;a<n.length;a++)t[o][a]=r[o]-n[a];return t},P=function(r,n){return r.map((function(r){return Math.pow(r,n)}))},T=function(r){return r.reduce((function(r,n){return Math.max(r,n)}))},k=function(r){return r.reduce((function(r,n){return Math.min(r,n)}))},R=function(r){return r.reduce((function(r,n){return r+n}))/r.length},L=t(2230),z=function(r){return function(n){var t=n.map((function(r){return Array.from(r)})),e=L.odF(t),o=L.Fp7(e),a=L.gWQ(e,L.luU(o,L.iD$(80))),i=L.VV$(a),s=L.hiC(L.luU(a,i),L.IHx(L.luU(o,i),L.iD$(1e-6))),u=L.p4s(s);return L.XLQ(u,r)}},D={encoderId:"encoder01",encoderMode:"SHORT",isFlipped:!0,encoderJSONPath:"/models/encoder01/model.json",samplingRate:44100,frameLength:1024,encoderPreprocessor:(_=1024,h=[1,32,16,1],function(r){var n=function(r){for(var n=new Float32Array(r.length),t=k(r),e=(T(r)-t)/2+1e-5,o=R(r),a=0;a<r.length;a++)n[a]=(r[a]-o)/e;return n}(r),t=function(r,n){var t=g(r,n),e=l(d(t,1)),o=e[0];return e.slice(1),o}(n,{nFft:_})[0],e=L.RRF(t),o=L.hiC(e,L.iD$(_)),a=L.tPi(o,1,_/2);return L.XLQ(a,h)}),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder01.png",xmin:-.002,xmax:.0025,ymin:-.004,ymax:.004}},V=(function(r,n,t,e){}(44100,2048,1024,[1,128,64,1]),{encoderId:"encoder02_long",encoderMode:"LONG_FAST",isFlipped:!0,encoderJSONPath:"/models/encoder02_long/model.json",samplingRate:44100,frameLength:2048,encoderPreprocessor:z([1,128,64,1]),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder02_long.png",xmin:-3,xmax:4,ymin:-4.5,ymax:3}}),H=(z([1,128,64,1]),{encoderId:"encoder01_new",encoderMode:"LONG_FAST",isFlipped:!1,encoderJSONPath:"/models/encoder01_new/model.json",samplingRate:44100,frameLength:2048,encoderPreprocessor:z([1,128,64,1]),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder01_new.png",xmin:-4.587998390197754,xmax:3.106440544128418,ymin:-3.313951015472412,ymax:3.5624425411224365}})},6434:function(r,n,t){"use strict";t.r(n);var e=t(5893),o=t(1639),a=t(560),i=t(9497),s=t(5968),u=t(5152),c=t.n(u),l=t(1163),f=t(7294),_=t(7844),h=t.n(_),d=t(559),g=t.n(d);function m(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}function v(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,o,a=[],i=!0,s=!1;try{for(t=t.call(r);!(i=(e=t.next()).done)&&(a.push(e.value),!n||a.length!==n);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(r,n)||function(r,n){if(!r)return;if("string"===typeof r)return m(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(r,n)}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=c()((function(){return Promise.all([t.e(6006),t.e(4873),t.e(3618),t.e(2142),t.e(2636)]).then(t.bind(t,2264)).then((function(r){return r.AudioVisualizer}))}),{loadableGenerated:{webpack:function(){return[2264]}},ssr:!1});n.default=function(){var r=(0,l.useRouter)(),n=v(h()(a.u.ANNOTATIONS,{}),1)[0],t=v(h()(a.u.CORRECT_ESTIMATION_HISTORY,[]),1)[0],u=(0,s.n)(t),c=f.useCallback((function(){r.push("/")}),[r]),_=f.useCallback((function(){r.push("/settingshape")}),[r]);return(0,e.jsxs)("div",{className:g().container,children:[(0,e.jsx)("h1",{children:"TimMorph - Microphone Demo"}),(0,e.jsxs)("h3",{className:g().caution,children:["Please allow microphone usage in this page. ",(0,e.jsx)("br",{}),"Only Chrome is supported. Other browsers are not recommended."]}),u?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:g().button__section,children:[(0,e.jsx)(o.z,{text:"\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3067\u306e\u30c7\u30e2\u3092\u898b\u308b",onClick:c}),(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b",onClick:_})]}),(0,e.jsx)("div",{className:g().main__content,children:(0,e.jsx)(p,{useMicrophone:!0,visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:n})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"It seems you have not finished shape setting."}),(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3059\u308b",onClick:_})]})]})}},5968:function(r,n,t){"use strict";t.d(n,{n:function(){return o}});var e=t(4524),o=function(r){var n=function(r){for(var n=0,t=r.length-1;t>=0;t--){if("CORRECT"!==r[t][1])return n;n+=1}return n}(r);return n>=3||r.length===e.Pg.length-3}},1314:function(r){r.exports={button__basic:"Button_button__basic__5C4_V"}},559:function(r){r.exports={container:"microphone_container__jeFVV",caution:"microphone_caution__HMZfa",main__content:"microphone_main__content__dJ6HC",button__section:"microphone_button__section__d4hrn"}},7844:function(r,n,t){"use strict";var e=this&&this.__assign||function(){return e=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r},e.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o=t(7294);n.default=function(r,n,t){var a=o.useMemo((function(){return e({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},t)}),[t]),i=a.serializer,s=a.parser,u=a.logger,c=a.syncData,l=o.useState((function(){if("undefined"===typeof window)return n;try{var t=window.localStorage.getItem(r);return t?s(t):n}catch(e){return u(e),n}})),f=l[0],_=l[1];return o.useEffect((function(){if("undefined"!==typeof window){try{void 0!==f?window.localStorage.setItem(r,i(f)):window.localStorage.removeItem(r)}catch(n){u(n)}}}),[f]),o.useEffect((function(){if(c){var n=function(n){if(n.key===r&&n.storageArea===window.localStorage)try{_(n.newValue?s(n.newValue):void 0)}catch(n){u(n)}};if("undefined"!==typeof window)return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}}}),[r,c]),[f,_]}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},function(r){r.O(0,[864,2723,3132,5974,904,1642,1815,9774,2888,179],(function(){return n=6432,r(r.s=n);var n}));var n=r.O();_N_E=n}]);