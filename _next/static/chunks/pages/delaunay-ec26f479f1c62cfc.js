(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{5775:function(t,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/delaunay",function(){return r(4905)}])},4905:function(t,n,r){"use strict";r.r(n);var i=r(5893),e=r(7941),a=r(5152),o=r.n(a),l=r(7294),s=r(7628),u=r.n(s);function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,e,a=[],o=!0,l=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!n||a.length!==n);o=!0);}catch(s){l=!0,e=s}finally{try{o||null==r.return||r.return()}finally{if(l)throw e}}return a}}(t,n)||function(t,n){if(!t)return;if("string"===typeof t)return c(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=o()((function(){return Promise.all([r.e(960),r.e(660)]).then(r.bind(r,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1,loading:function(){return(0,i.jsx)("p",{className:u().loading__text,children:"Loading..."})}}),p=new Array(21).fill(0).map((function(t,n){return n-10})),d=new Array(21).fill(0).map((function(t,n){return n-10})),m=new Array(p.length).fill(0).map((function(){return new Array(d.length).fill(0)}));n.default=function(){var t=f(l.useState(null),2),n=t[0],r=t[1],a=f(l.useState(m),2),o=a[0],s=a[1];l.useEffect((function(){var t=new e.f(2,1);r(t)}),[]);var c=l.useCallback((function(){if(null!==n){var t=10*Math.random()-5,r=10*Math.random()-5,i=(t*t+r*r)/100;n.addPoint([t,r],[i]);for(var e=new Array(p.length).fill(0).map((function(){return new Array(d.length).fill(0)})),a=0;a<p.length;a++)for(var o=0;o<d.length;o++){var l=p[a],u=d[o];e[a][o]=n.estimate([l,u])[0]}s(e)}}),[n]);return(0,i.jsxs)("div",{className:u().container,children:[(0,i.jsx)("h1",{className:u().title,children:"Delaunay Estimator Demo"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Ground Truth : z = ( x * x + y * y ) / 100"}),(0,i.jsxs)("p",{children:["By clicking ",(0,i.jsx)("b",{children:"Add Point"})," button, one sample point is randomly added from the range -5 < x < 5, -5 < y < 5."]})]}),(0,i.jsxs)("div",{className:u().figure__container,children:[(0,i.jsx)(h,{data:[{type:"surface",x:p,y:d,z:o}],layout:{width:600,height:600,margin:{t:20,b:20,r:0,l:0}}}),(0,i.jsx)("button",{className:u().add__button,onClick:c,children:"Add Point"})]})]})}},7941:function(t,n,r){"use strict";r.d(n,{f:function(){return s}});var i=r(1029),e=r(6951),a=function(t,n,r,a){for(var o=t.length,l=n.length,s=r.map((function(n){return n.map((function(n,r){return n-t[r]}))})),u=s.map((function(t){var n=t.reduce((function(t,n){return t+n*n}),0);return 0===n?1:1/n})),c=a.map((function(t){return t.map((function(t,r){return t-n[r]}))})),f=new Array(o).fill(0).map((function(){return new Array(o).fill(0)})),h=new Array(l).fill(0).map((function(){return new Array(o).fill(0)})),p=0;p<r.length;p++){for(var d=0;d<o;d++)for(var m=0;m<o;m++)f[d][m]+=u[p]*s[p][m]*s[p][d];for(var v=0;v<l;v++)for(var y=0;y<o;y++)h[v][y]+=u[p]*s[p][y]*c[p][v]}var _=new i.Z(f),x=new i.Z(h),g=(0,e.S)(_,!0);return x.mmul(g).to2DArray()},o=r(1568),l=r(2055);var s=function(){function t(n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.inputDim=n,this.outputDim=r,this.points=[],this.vectors=[],this.simplexPointIds=[],this.simplexVectors=[],this.hullFacetPointIds=[],this.hullFacetVectors=[],this.simplexTransforms=[],this.hullFacetJacobians=[]}var n=t.prototype;return n.addPoint=function(t,n){this.points.push(t),this.vectors.push(n),this._updateDelaunay(),this._updateSimplexTransforms(),this._updateHullFacetJacobians()},n.estimate=function(t){var n=this._findSimplex(t),r=n.iSimplex,i=n.barycentricCoordInSimplex;if(r>=0)return this._linearInterpolateVector(i,this.simplexVectors[r]);var e=this._findNearestFacet(t),a=e.iFacet,o=e.barycentricCoordOfNearestPoint,s=e.ordinaryCoordOfNearestPoint,u=this._linearInterpolateVector(o,this.hullFacetVectors[a]),c=this._linearInterpolateMatrix(o,this.hullFacetJacobians[a]),f=l.$XF(t,s);return this._firstOrderApproximation(u,c,f)},n._updateDelaunay=function(){if(2===this.inputDim){for(var t=o.Z.from(this.points),n=t.triangles,r=[],i=[],e=0;e<n.length;e+=3)r.push([n[e],n[e+1],n[e+2]]),i.push([this.vectors[n[e]],this.vectors[n[e+1]],this.vectors[n[e+2]]]);var a=t.hull,l=[],s=[];if(a.length<this.inputDim+1){var u=this;l.push(Array.from(a)),s.push(Array.from(a).map((function(t){return u.vectors[t]})))}else for(var c=0;c<a.length;c++)l.push([a[c],a[(c+1)%a.length]]),s.push([this.vectors[a[c]],this.vectors[a[(c+1)%a.length]]]);return this.simplexPointIds=r,this.simplexVectors=i,this.hullFacetPointIds=l,void(this.hullFacetVectors=s)}},n._updateSimplexTransforms=function(){for(var t=this,n=function(n){for(var a=t,o=new Array(t.inputDim+1).fill(0).map((function(){return new Array(a.inputDim).fill(0)})),l=0;l<t.inputDim;l++)o[t.inputDim][l]=t.points[t.simplexPointIds[n][t.inputDim]][l];for(var s=new Array(t.inputDim).fill(0).map((function(){return new Array(a.inputDim).fill(0)})),u=0;u<t.inputDim;u++)for(var c=0;c<t.inputDim;c++)s[u][c]=t.points[t.simplexPointIds[n][c]][u]-t.points[t.simplexPointIds[n][t.inputDim]][u];for(var f=new i.Z(s),h=(0,e.S)(f,!0).to2DArray(),p=0;p<t.inputDim;p++)for(var d=0;d<t.inputDim;d++)o[p][d]=h[p][d];r.push(o)},r=[],a=0;a<this.simplexPointIds.length;a++)n(a);this.simplexTransforms=r},n._updateHullFacetJacobians=function(){for(var t=[],n=0;n<this.hullFacetPointIds.length;n++){for(var r=[],i=this.hullFacetPointIds[n],e=0;e<i.length;e++){var o=this,l=i[e],s=this._findAdjPointIds(l),u=[],c=[];s.forEach((function(t){u.push(o.points[t]),c.push(o.vectors[t])}));var f=a(this.points[l],this.vectors[l],u,c);r.push(f)}t.push(r)}this.hullFacetJacobians=t},n._findAdjPointIds=function(t){var n=new Set;return 0===this.simplexPointIds.length?this.points.forEach((function(r,i){i!==t&&n.add(i)})):this.simplexPointIds.forEach((function(r){new Set(r).has(t)&&r.forEach((function(r){r!==t&&n.add(r)}))})),n},n._findSimplex=function(t){for(var n=1e-5,r=0;r<this.simplexPointIds.length;r++){for(var i=this._calcBarycentricCoordInSimplex(t,r),e=!0,a=0;a<i.length;a++)(i[a]<-n||i[a]>1+n)&&(e=!1);if(e)return{iSimplex:r,barycentricCoordInSimplex:i}}return{iSimplex:-1,barycentricCoordInSimplex:[]}},n._findNearestFacet=function(t){for(var n=1/0,r=-1,i=[],e=[],a=0;a<this.hullFacetPointIds.length;a++){var o=this._calcBarycentricCoordOfNearestPointInFacet(t,a),s=this._calcOrdinaryCoordFromBarycentricCoordInFacet(o,a),u=l.KOy(l.$XF(t,s));u<n&&(n=u,r=a,i=o,e=s)}return{iFacet:r,barycentricCoordOfNearestPoint:i,ordinaryCoordOfNearestPoint:e}},n._calcBarycentricCoordOfNearestPointInFacet=function(t,n){var r=this,i=this.hullFacetPointIds[n].length;if(1===i)return[1];for(var e=new Array(i-1).fill(0).map((function(t,e){return l.$XF(r.points[r.hullFacetPointIds[n][e]],r.points[r.hullFacetPointIds[n][i-1]])})),a=l.$XF(t,this.points[this.hullFacetPointIds[n][i-1]]),o=new Array(i-1).fill(0).map((function(){return new Array(i-1)})),s=0;s<i-1;s++)for(var u=0;u<i-1;u++)o[s][u]=l.AKD(e[s],e[u]);for(var c=new Array(i-1).fill(0),f=0;f<i-1;f++)c[f]=l.AKD(e[f],a);var h=l.JpY(l.JBn(o),c),p=new Array(i).fill(0);p[i-1]=1;for(var d=0;d<i-1;d++)p[d]=Math.min(Math.max(h[d],0),1),p[i-1]-=p[d];return p},n._calcOrdinaryCoordFromBarycentricCoordInFacet=function(t,n){var r=this,i=this.hullFacetPointIds[n].map((function(t){return r.points[t]}));return this._linearInterpolateVector(t,i)},n._calcBarycentricCoordInSimplex=function(t,n){var r=t.length,i=new Array(r+1).fill(0);i[r]=1;for(var e=this.simplexTransforms[n],a=0;a<r;a++){for(var o=0;o<r;o++)i[a]+=e[a][o]*(t[o]-e[r][o]);i[r]-=i[a]}return i},n._linearInterpolateVector=function(t,n){var r=t.length;if(0===r)return[];for(var i=n[0].length,e=new Array(i).fill(0),a=0;a<i;a++)for(var o=0;o<r;o++)e[a]+=t[o]*n[o][a];return e},n._linearInterpolateMatrix=function(t,n){var r=t.length;if(0===r)return[];for(var i=n[0].length,e=n[0][0].length,a=new Array(i).fill(0).map((function(){return new Array(e).fill(0)})),o=0;o<i;o++)for(var l=0;l<e;l++)for(var s=0;s<r;s++)a[o][l]+=t[s]*n[s][o][l];return a},n._firstOrderApproximation=function(t,n,r){return l.IHx(t,l.JpY(n,r))},t}()},7628:function(t){t.exports={container:"delaunay_container__eLivI",title:"delaunay_title__uSFmx",figure__container:"delaunay_figure__container__wPn9P",add__button:"delaunay_add__button__kJnCl",loading__text:"delaunay_loading__text__E5TPy"}},2007:function(){}},function(t){t.O(0,[152,873,774,888,179],(function(){return n=5775,t(t.s=n);var n}));var n=t.O();_N_E=n}]);