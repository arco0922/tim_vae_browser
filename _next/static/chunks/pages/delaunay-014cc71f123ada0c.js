(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3010],{5775:function(t,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/delaunay",function(){return n(4905)}])},4905:function(t,r,n){"use strict";n.r(r);var i=n(5893),e=n(7941),a=n(5152),o=n.n(a),s=n(7294),l=n(7628),u=n.n(l);function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function f(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,e,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(a.push(i.value),!r||a.length!==r);o=!0);}catch(l){s=!0,e=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw e}}return a}}(t,r)||function(t,r){if(!t)return;if("string"===typeof t)return c(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=o()((function(){return Promise.all([n.e(2960),n.e(8660)]).then(n.bind(n,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1,loading:function(){return(0,i.jsx)("p",{className:u().loading__text,children:"Loading..."})}}),p=new Array(21).fill(0).map((function(t,r){return r-10})),d=new Array(21).fill(0).map((function(t,r){return r-10})),m=new Array(p.length).fill(0).map((function(){return new Array(d.length).fill(0)}));r.default=function(){var t=f(s.useState(null),2),r=t[0],n=t[1],a=f(s.useState(m),2),o=a[0],l=a[1];s.useEffect((function(){var t=new e.f(2,1);n(t)}),[]);var c=s.useCallback((function(){if(null!==r){var t=10*Math.random()-5,n=10*Math.random()-5,i=(t*t+n*n)/100;r.addPoint([t,n],[i]);for(var e=new Array(p.length).fill(0).map((function(){return new Array(d.length).fill(0)})),a=0;a<p.length;a++)for(var o=0;o<d.length;o++){var s=p[a],u=d[o];e[a][o]=r.estimate([s,u])[0]}l(e)}}),[r]);return(0,i.jsxs)("div",{className:u().container,children:[(0,i.jsx)("h1",{className:u().title,children:"Delaunay Estimator Demo"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Ground Truth : z = ( x * x + y * y ) / 100"}),(0,i.jsxs)("p",{children:["By clicking ",(0,i.jsx)("b",{children:"Add Point"})," button, one sample point is randomly added from the range -5 < x < 5, -5 < y < 5."]})]}),(0,i.jsxs)("div",{className:u().figure__container,children:[(0,i.jsx)(h,{data:[{type:"surface",x:p,y:d,z:o}],layout:{width:600,height:600,margin:{t:20,b:20,r:0,l:0}}}),(0,i.jsx)("button",{className:u().add__button,onClick:c,children:"Add Point"})]})]})}},7941:function(t,r,n){"use strict";n.d(r,{f:function(){return l}});var i=n(1029),e=n(6951),a=function(t,r,n,a){for(var o=t.length,s=r.length,l=n.map((function(r){return r.map((function(r,n){return r-t[n]}))})),u=l.map((function(t){var r=t.reduce((function(t,r){return t+r*r}),0);return 0===r?1:1/r})),c=a.map((function(t){return t.map((function(t,n){return t-r[n]}))})),f=new Array(o).fill(0).map((function(){return new Array(o).fill(0)})),h=new Array(s).fill(0).map((function(){return new Array(o).fill(0)})),p=0;p<n.length;p++){for(var d=0;d<o;d++)for(var m=0;m<o;m++)f[d][m]+=u[p]*l[p][m]*l[p][d];for(var v=0;v<s;v++)for(var y=0;y<o;y++)h[v][y]+=u[p]*l[p][y]*c[p][v]}var _=new i.Z(f),x=new i.Z(h),g=(0,e.S)(_,!0);return x.mmul(g).to2DArray()},o=n(1568),s=n(2055);var l=function(){function t(r,n){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.inputDim=r,this.outputDim=n,this.points=[],this.vectors=[],this.simplexPointIds=[],this.simplexVectors=[],this.hullFacetPointIds=[],this.hullFacetVectors=[],this.simplexTransforms=[],this.hullFacetJacobians=[]}var r=t.prototype;return r.addPoint=function(t,r){this.points.push(t),this.vectors.push(r),this._updateDelaunay(),this._updateSimplexTransforms(),this._updateHullFacetJacobians()},r.estimate=function(t){var r=this._findSimplex(t),n=r.iSimplex,i=r.barycentricCoordInSimplex;if(n>=0)return this._linearInterpolateVector(i,this.simplexVectors[n]);var e=this._findNearestFacet(t),a=e.iFacet,o=e.barycentricCoordOfNearestPoint,l=e.ordinaryCoordOfNearestPoint,u=this._linearInterpolateVector(o,this.hullFacetVectors[a]),c=this._linearInterpolateMatrix(o,this.hullFacetJacobians[a]),f=s.$XF(t,l);return this._firstOrderApproximation(u,c,f)},r.suggestVectors=function(t){var r=this._findSimplex(t),n=r.iSimplex,i=r.barycentricCoordInSimplex;if(n>=0){for(var e=this.simplexVectors[n][this.inputDim],a=[],o=0;o<this.inputDim;o++){var l=s.$XF(this.simplexVectors[n][o],e),u=-i[o],c=1-i[o];a.push({vector:l,minCoefficient:u,maxCoefficient:c})}return a}for(var f=this._findNearestFacet(t),h=f.iFacet,p=f.barycentricCoordOfNearestPoint,d=this._linearInterpolateMatrix(p,this.hullFacetJacobians[h]),m=[],v=0;v<this.inputDim;v++){var y=new Array(this.inputDim).fill(0);y[v]=1;var _=s.JpY(d,y);m.push({vector:_,minCoefficient:-2,maxCoefficient:2})}return m},r._updateDelaunay=function(){if(2===this.inputDim){for(var t=o.Z.from(this.points),r=t.triangles,n=[],i=[],e=0;e<r.length;e+=3)n.push([r[e],r[e+1],r[e+2]]),i.push([this.vectors[r[e]],this.vectors[r[e+1]],this.vectors[r[e+2]]]);var a=t.hull,s=[],l=[];if(a.length<this.inputDim+1){var u=this;s.push(Array.from(a)),l.push(Array.from(a).map((function(t){return u.vectors[t]})))}else for(var c=0;c<a.length;c++)s.push([a[c],a[(c+1)%a.length]]),l.push([this.vectors[a[c]],this.vectors[a[(c+1)%a.length]]]);return this.simplexPointIds=n,this.simplexVectors=i,this.hullFacetPointIds=s,void(this.hullFacetVectors=l)}},r._updateSimplexTransforms=function(){for(var t=this,r=function(r){for(var a=t,o=new Array(t.inputDim+1).fill(0).map((function(){return new Array(a.inputDim).fill(0)})),s=0;s<t.inputDim;s++)o[t.inputDim][s]=t.points[t.simplexPointIds[r][t.inputDim]][s];for(var l=new Array(t.inputDim).fill(0).map((function(){return new Array(a.inputDim).fill(0)})),u=0;u<t.inputDim;u++)for(var c=0;c<t.inputDim;c++)l[u][c]=t.points[t.simplexPointIds[r][c]][u]-t.points[t.simplexPointIds[r][t.inputDim]][u];for(var f=new i.Z(l),h=(0,e.S)(f,!0).to2DArray(),p=0;p<t.inputDim;p++)for(var d=0;d<t.inputDim;d++)o[p][d]=h[p][d];n.push(o)},n=[],a=0;a<this.simplexPointIds.length;a++)r(a);this.simplexTransforms=n},r._updateHullFacetJacobians=function(){for(var t=[],r=0;r<this.hullFacetPointIds.length;r++){for(var n=[],i=this.hullFacetPointIds[r],e=0;e<i.length;e++){var o=this,s=i[e],l=this._findAdjPointIds(s),u=[],c=[];l.forEach((function(t){u.push(o.points[t]),c.push(o.vectors[t])}));var f=a(this.points[s],this.vectors[s],u,c);n.push(f)}t.push(n)}this.hullFacetJacobians=t},r._findAdjPointIds=function(t){var r=new Set;return 0===this.simplexPointIds.length?this.points.forEach((function(n,i){i!==t&&r.add(i)})):this.simplexPointIds.forEach((function(n){new Set(n).has(t)&&n.forEach((function(n){n!==t&&r.add(n)}))})),r},r._findSimplex=function(t){for(var r=1e-5,n=0;n<this.simplexPointIds.length;n++){for(var i=this._calcBarycentricCoordInSimplex(t,n),e=!0,a=0;a<i.length;a++)(i[a]<-r||i[a]>1+r)&&(e=!1);if(e)return{iSimplex:n,barycentricCoordInSimplex:i}}return{iSimplex:-1,barycentricCoordInSimplex:[]}},r._findNearestFacet=function(t){for(var r=1/0,n=-1,i=[],e=[],a=0;a<this.hullFacetPointIds.length;a++){var o=this._calcBarycentricCoordOfNearestPointInFacet(t,a),l=this._calcOrdinaryCoordFromBarycentricCoordInFacet(o,a),u=s.KOy(s.$XF(t,l));u<r&&(r=u,n=a,i=o,e=l)}return{iFacet:n,barycentricCoordOfNearestPoint:i,ordinaryCoordOfNearestPoint:e}},r._calcBarycentricCoordOfNearestPointInFacet=function(t,r){var n=this,i=this.hullFacetPointIds[r].length;if(1===i)return[1];for(var e=new Array(i-1).fill(0).map((function(t,e){return s.$XF(n.points[n.hullFacetPointIds[r][e]],n.points[n.hullFacetPointIds[r][i-1]])})),a=s.$XF(t,this.points[this.hullFacetPointIds[r][i-1]]),o=new Array(i-1).fill(0).map((function(){return new Array(i-1)})),l=0;l<i-1;l++)for(var u=0;u<i-1;u++)o[l][u]=s.AKD(e[l],e[u]);for(var c=new Array(i-1).fill(0),f=0;f<i-1;f++)c[f]=s.AKD(e[f],a);var h=s.JpY(s.JBn(o),c),p=new Array(i).fill(0);p[i-1]=1;for(var d=0;d<i-1;d++)p[d]=Math.min(Math.max(h[d],0),1),p[i-1]-=p[d];return p},r._calcOrdinaryCoordFromBarycentricCoordInFacet=function(t,r){var n=this,i=this.hullFacetPointIds[r].map((function(t){return n.points[t]}));return this._linearInterpolateVector(t,i)},r._calcBarycentricCoordInSimplex=function(t,r){var n=t.length,i=new Array(n+1).fill(0);i[n]=1;for(var e=this.simplexTransforms[r],a=0;a<n;a++){for(var o=0;o<n;o++)i[a]+=e[a][o]*(t[o]-e[n][o]);i[n]-=i[a]}return i},r._linearInterpolateVector=function(t,r){var n=t.length;if(0===n)return[];for(var i=r[0].length,e=new Array(i).fill(0),a=0;a<i;a++)for(var o=0;o<n;o++)e[a]+=t[o]*r[o][a];return e},r._linearInterpolateMatrix=function(t,r){var n=t.length;if(0===n)return[];for(var i=r[0].length,e=r[0][0].length,a=new Array(i).fill(0).map((function(){return new Array(e).fill(0)})),o=0;o<i;o++)for(var s=0;s<e;s++)for(var l=0;l<n;l++)a[o][s]+=t[l]*r[l][o][s];return a},r._firstOrderApproximation=function(t,r,n){return s.IHx(t,s.JpY(r,n))},t}()},7628:function(t){t.exports={container:"delaunay_container__eLivI",title:"delaunay_title__uSFmx",figure__container:"delaunay_figure__container__wPn9P",add__button:"delaunay_add__button__kJnCl",loading__text:"delaunay_loading__text__E5TPy"}},2007:function(){}},function(t){t.O(0,[4873,9774,2888,179],(function(){return r=5775,t(t.s=r);var r}));var r=t.O();_N_E=r}]);