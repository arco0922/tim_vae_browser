(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{9393:function(t,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/delaunay",function(){return r(3963)}])},3963:function(t,n,r){"use strict";r.r(n),r.d(n,{default:function(){return w}});var i=r(5893),e=r(1029),a=r(6951),o=function(t,n,r,i){for(var o=t.length,l=n.length,s=r.map((function(n){return n.map((function(n,r){return n-t[r]}))})),u=s.map((function(t){var n=t.reduce((function(t,n){return t+n*n}),0);return 0===n?1:1/n})),c=i.map((function(t){return t.map((function(t,r){return t-n[r]}))})),f=new Array(o).fill(0).map((function(){return new Array(o).fill(0)})),h=new Array(l).fill(0).map((function(){return new Array(o).fill(0)})),p=0;p<r.length;p++){for(var d=0;d<o;d++)for(var m=0;m<o;m++)f[d][m]+=u[p]*s[p][m]*s[p][d];for(var v=0;v<l;v++)for(var y=0;y<o;y++)h[v][y]+=u[p]*s[p][y]*c[p][v]}var _=new e.Z(f),x=new e.Z(h),g=(0,a.S)(_,!0);return x.mmul(g).to2DArray()},l=r(1568),s=r(2055);var u=function(){function t(n,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.inputDim=n,this.outputDim=r,this.points=[],this.vectors=[],this.simplexPointIds=[],this.simplexVectors=[],this.hullFacetPointIds=[],this.hullFacetVectors=[],this.simplexTransforms=[],this.hullFacetJacobians=[]}var n=t.prototype;return n.addPoint=function(t,n){this.points.push(t),this.vectors.push(n),this._updateDelaunay(),this._updateSimplexTransforms(),this._updateHullFacetJacobians()},n.estimate=function(t){var n=this._findSimplex(t),r=n.iSimplex,i=n.barycentricCoordInSimplex;if(r>=0)return this._linearInterpolateVector(i,this.simplexVectors[r]);var e=this._findNearestFacet(t),a=e.iFacet,o=e.barycentricCoordOfNearestPoint,l=e.ordinaryCoordOfNearestPoint,u=this._linearInterpolateVector(o,this.hullFacetVectors[a]),c=this._linearInterpolateMatrix(o,this.hullFacetJacobians[a]),f=s.$XF(t,l);return this._firstOrderApproximation(u,c,f)},n._updateDelaunay=function(){if(2===this.inputDim){for(var t=l.Z.from(this.points),n=t.triangles,r=[],i=[],e=0;e<n.length;e+=3)r.push([n[e],n[e+1],n[e+2]]),i.push([this.vectors[n[e]],this.vectors[n[e+1]],this.vectors[n[e+2]]]);var a=t.hull,o=[],s=[];if(a.length<this.inputDim+1){var u=this;o.push(Array.from(a)),s.push(Array.from(a).map((function(t){return u.vectors[t]})))}else for(var c=0;c<a.length;c++)o.push([a[c],a[(c+1)%a.length]]),s.push([this.vectors[a[c]],this.vectors[a[(c+1)%a.length]]]);return this.simplexPointIds=r,this.simplexVectors=i,this.hullFacetPointIds=o,void(this.hullFacetVectors=s)}},n._updateSimplexTransforms=function(){for(var t=this,n=function(n){for(var i=t,o=new Array(t.inputDim+1).fill(0).map((function(){return new Array(i.inputDim).fill(0)})),l=0;l<t.inputDim;l++)o[t.inputDim][l]=t.points[t.simplexPointIds[n][t.inputDim]][l];for(var s=new Array(t.inputDim).fill(0).map((function(){return new Array(i.inputDim).fill(0)})),u=0;u<t.inputDim;u++)for(var c=0;c<t.inputDim;c++)s[u][c]=t.points[t.simplexPointIds[n][c]][u]-t.points[t.simplexPointIds[n][t.inputDim]][u];for(var f=new e.Z(s),h=(0,a.S)(f,!0).to2DArray(),p=0;p<t.inputDim;p++)for(var d=0;d<t.inputDim;d++)o[p][d]=h[p][d];r.push(o)},r=[],i=0;i<this.simplexPointIds.length;i++)n(i);this.simplexTransforms=r},n._updateHullFacetJacobians=function(){for(var t=[],n=0;n<this.hullFacetPointIds.length;n++){for(var r=[],i=this.hullFacetPointIds[n],e=0;e<i.length;e++){var a=this,l=i[e],s=this._findAdjPointIds(l),u=[],c=[];s.forEach((function(t){u.push(a.points[t]),c.push(a.vectors[t])}));var f=o(this.points[l],this.vectors[l],u,c);r.push(f)}t.push(r)}this.hullFacetJacobians=t},n._findAdjPointIds=function(t){var n=new Set;return 0===this.simplexPointIds.length?this.points.forEach((function(r,i){i!==t&&n.add(i)})):this.simplexPointIds.forEach((function(r){new Set(r).has(t)&&r.forEach((function(r){r!==t&&n.add(r)}))})),n},n._findSimplex=function(t){for(var n=1e-5,r=0;r<this.simplexPointIds.length;r++){for(var i=this._calcBarycentricCoordInSimplex(t,r),e=!0,a=0;a<i.length;a++)(i[a]<-n||i[a]>1+n)&&(e=!1);if(e)return{iSimplex:r,barycentricCoordInSimplex:i}}return{iSimplex:-1,barycentricCoordInSimplex:[]}},n._findNearestFacet=function(t){for(var n=1/0,r=-1,i=[],e=[],a=0;a<this.hullFacetPointIds.length;a++){var o=this._calcBarycentricCoordOfNearestPointInFacet(t,a),l=this._calcOrdinaryCoordFromBarycentricCoordInFacet(o,a),u=s.KOy(s.$XF(t,l));u<n&&(n=u,r=a,i=o,e=l)}return{iFacet:r,barycentricCoordOfNearestPoint:i,ordinaryCoordOfNearestPoint:e}},n._calcBarycentricCoordOfNearestPointInFacet=function(t,n){var r=this,i=this.hullFacetPointIds[n].length;if(1===i)return[1];for(var e=new Array(i-1).fill(0).map((function(t,e){return s.$XF(r.points[r.hullFacetPointIds[n][e]],r.points[r.hullFacetPointIds[n][i-1]])})),a=s.$XF(t,this.points[this.hullFacetPointIds[n][i-1]]),o=new Array(i-1).fill(0).map((function(){return new Array(i-1)})),l=0;l<i-1;l++)for(var u=0;u<i-1;u++)o[l][u]=s.AKD(e[l],e[u]);for(var c=new Array(i-1).fill(0),f=0;f<i-1;f++)c[f]=s.AKD(e[f],a);var h=s.JpY(s.JBn(o),c),p=new Array(i).fill(0);p[i-1]=1;for(var d=0;d<i-1;d++)p[d]=Math.min(Math.max(h[d],0),1),p[i-1]-=p[d];return p},n._calcOrdinaryCoordFromBarycentricCoordInFacet=function(t,n){var r=this,i=this.hullFacetPointIds[n].map((function(t){return r.points[t]}));return this._linearInterpolateVector(t,i)},n._calcBarycentricCoordInSimplex=function(t,n){var r=t.length,i=new Array(r+1).fill(0);i[r]=1;for(var e=this.simplexTransforms[n],a=0;a<r;a++){for(var o=0;o<r;o++)i[a]+=e[a][o]*(t[o]-e[r][o]);i[r]-=i[a]}return i},n._linearInterpolateVector=function(t,n){var r=t.length;if(0===r)return[];for(var i=n[0].length,e=new Array(i).fill(0),a=0;a<i;a++)for(var o=0;o<r;o++)e[a]+=t[o]*n[o][a];return e},n._linearInterpolateMatrix=function(t,n){var r=t.length;if(0===r)return[];for(var i=n[0].length,e=n[0][0].length,a=new Array(i).fill(0).map((function(){return new Array(e).fill(0)})),o=0;o<i;o++)for(var l=0;l<e;l++)for(var s=0;s<r;s++)a[o][l]+=t[s]*n[s][o][l];return a},n._firstOrderApproximation=function(t,n,r){return s.IHx(t,s.JpY(n,r))},t}(),c=r(5152),f=r.n(c),h=r(7294),p=r(5150),d=r.n(p);function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function v(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,e,a=[],o=!0,l=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!n||a.length!==n);o=!0);}catch(s){l=!0,e=s}finally{try{o||null==r.return||r.return()}finally{if(l)throw e}}return a}}(t,n)||function(t,n){if(!t)return;if("string"===typeof t)return m(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=f()((function(){return Promise.all([r.e(960),r.e(660)]).then(r.bind(r,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1,loading:function(){return(0,i.jsx)("p",{className:d().loading__text,children:"Loading..."})}}),_=new Array(21).fill(0).map((function(t,n){return n-10})),x=new Array(21).fill(0).map((function(t,n){return n-10})),g=new Array(_.length).fill(0).map((function(){return new Array(x.length).fill(0)})),w=function(){var t=v(h.useState(null),2),n=t[0],r=t[1],e=v(h.useState(g),2),a=e[0],o=e[1];h.useEffect((function(){var t=new u(2,1);r(t)}),[]);var l=h.useCallback((function(){if(null!==n){var t=10*Math.random()-5,r=10*Math.random()-5,i=(t*t+r*r)/100;n.addPoint([t,r],[i]);for(var e=new Array(_.length).fill(0).map((function(){return new Array(x.length).fill(0)})),a=0;a<_.length;a++)for(var l=0;l<x.length;l++){var s=_[a],u=x[l];e[a][l]=n.estimate([s,u])[0]}o(e)}}),[n]);return(0,i.jsxs)("div",{className:d().container,children:[(0,i.jsx)("h1",{className:d().title,children:"Delaunay Estimator Demo"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Ground Truth : z = ( x * x + y * y ) / 100"}),(0,i.jsxs)("p",{children:["By clicking ",(0,i.jsx)("b",{children:"Add Point"})," button, one sample point inside ( -5 < x < 5, -5 < y < 5 ) is added randomly."]})]}),(0,i.jsxs)("div",{className:d().figure__container,children:[(0,i.jsx)(y,{data:[{type:"surface",x:_,y:x,z:a}],layout:{width:600,height:600,margin:{t:20,b:20,r:0,l:0}}}),(0,i.jsx)("button",{className:d().add__button,onClick:l,children:"Add Point"})]})]})}},5150:function(t){t.exports={container:"DelaunayDemo_container__hZp2_",title:"DelaunayDemo_title__pQT5G",figure__container:"DelaunayDemo_figure__container__hKCRq",add__button:"DelaunayDemo_add__button__p0BMA",loading__text:"DelaunayDemo_loading__text__avRc8"}},2007:function(){}},function(t){t.O(0,[152,873,774,888,179],(function(){return n=9393,t(t.s=n);var n}));var n=t.O();_N_E=n}]);