(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5970)}])},1639:function(n,t,r){"use strict";r.d(t,{z:function(){return u}});var e=r(5893),o=r(7294),a=r(1314),i=r.n(a),u=o.memo((function(n){var t=n.text,r=n.className,o=n.onClick,a=n.disabled,u=void 0!==a&&a;return(0,e.jsx)("button",{onClick:o,className:"".concat(i().button__basic," ").concat(r||""),disabled:u,children:t})}))},560:function(n,t,r){"use strict";var e;r.d(t,{u:function(){return e}}),function(n){n.ANNOTATIONS="timmorph__annotations",n.CORRECT_ESTIMATION_HISTORY="timmorph__correctEstimationHistory",n.EXP_ANNOTATIONS="timmorph__exp__annotations",n.EXP_CORRECT_ESTIMATION_HISTORY="timmorph__exp__correctEstimationHistory",n.EXP_RESULTS="timmorph__exp__results",n.EXP_ORDER="timmorph__exp__order"}(e||(e={}))},9497:function(n,t,r){"use strict";r.d(t,{sq:function(){return L}});var e=r(9645),o=r.n(e);function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function u(n){if(Array.isArray(n))return n}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(n,t){return u(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,a=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(a.push(e.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(n,t)||s(n,t)||l()}function f(n){return u(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||s(n,i)||l()}function s(n,t){if(n){if("string"===typeof n)return a(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(n,t):void 0}}var h,d,g=function(n,t){return[n.map((function(n){return C(E(n),t)})),n[0].length-1]},m=function(n,t){var r=t.nFft||2048,e=t.winLength||r,o=t.hopLength||Math.floor(e/4),a=M(e);a=_(a,r),t.center&&(n=b(n,Math.floor(r/2)));for(var i=A(n,r,o),u=[],l=i.length,c=r+2,f=0;f<l;f++){var s=new Float32Array(c);u[f]=s}for(var h=0;h<l;h++){var d=y(i[h],a),g=S(d);u[h].set(g.slice(0,c))}return u},v=function(n,t){for(var r=[],e=0;e<n.length;e++)r[e]=p(n[e],t);return r},p=function(n,t){if(n.length!==t[0].length)throw new Error("Each entry in filterbank should have dimensions "+"matching FFT. |mags| = ".concat(n.length,", ")+"|filterbank[0]| = ".concat(t[0].length,"."));for(var r=new Float32Array(t.length),e=0;e<t.length;e++){var o=y(n,t[e]);r[e]=o.reduce((function(n,t){return n+t}))}return r},y=function(n,t){for(var r=new Float32Array(n.length),e=0;e<n.length;e++)r[e]=t[e]*n[e];return r},_=function(n,t){if(n.length>t)throw new Error("Data is longer than length.");var r=Math.floor((t-n.length)/2),e=t-n.length-r;return w(n,[r,e])},w=function(n,t){var r,e,o;"object"===typeof t?(r=(o=c(t,2))[0],e=o[1]):r=e=t;var a=new Float32Array(n.length+r+e);return a.set(n,r),a},b=function(n,t){for(var r=w(n,t),e=0;e<t;e++)r[e]=r[2*t-e],r[r.length-e-1]=r[r.length-2*t+e-1];return r},A=function(n,t,r){for(var e=Math.floor((n.length-t)/r)+1,o=Array.from({length:e},(function(n,r){return new Float32Array(t)})),a=0;a<e;a++){var i=a*r,u=n.slice(i,i+t);o[a].set(u),u.length}return o},x=function(n){for(var t=function(n){var t=2/(u[2+n]-u[n]);s[n]=s[n].map((function(n){return n*t}))},r=n.fMin||0,e=n.fMax||n.sampleRate/2,o=n.nMels||128,a=n.nFft||2048,i=I(n.sampleRate,a),u=N(o+2,r,e),l=j(u),c=F(u,i),f=c[0].length,s=[],h=0;h<o;h++){s[h]=new Float32Array(f);for(var d=0;d<c[h].length;d++){var g=-c[h][d]/l[h],m=c[h+2][d]/l[h+1],v=Math.max(0,Math.min(g,m));s[h][d]=v}}for(var p=0;p<s.length;p++)t(p);return s},S=function(n){var t=new(o())(n.length),r=t.createComplexArray(),e=t.toComplexArray(n,null);return t.transform(r,e),r},M=function(n){for(var t=new Float32Array(n),r=0;r<n;r++)t[r]=.5*(1-Math.cos(2*Math.PI*r/(n-1)));return t},O=function(n,t,r){for(var e=(t-n)/(r-1),o=new Float32Array(r),a=0;a<r;a++)o[a]=n+e*a;return o},E=function(n){for(var t=new Float32Array(n.length/2),r=0;r<n.length/2;r++)t[r]=Math.sqrt(n[2*r]*n[2*r]+n[2*r+1]*n[2*r+1]);return t},T=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return 2595*Math.log10(1+n/700);var r=0,e=200/3,o=(n-r)/e,a=1e3,i=(a-r)/e,u=Math.log(6.4)/27;return n>=a&&(o=i+Math.log(n/a)/u),o},I=function(n,t){return O(0,n/2,Math.floor(1+t/2))},N=function(n,t,r){var e=T(t),o=T(r),a=O(e,o,n).map((function(n){return function(n){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return 700*(Math.exp(n/1125)-1);var t=0,r=200/3,e=t+r*n,o=1e3,a=(o-t)/r,i=Math.log(6.4)/27;return n>=a&&(e=o*Math.exp(i*(n-a))),e}(n)}));return a},j=function(n){for(var t=new Float32Array(n.length-1),r=0;r<n.length;r++)t[r]=n[r+1]-n[r];return t},F=function(n,t){for(var r=[],e=0;e<n.length;e++)r[e]=new Float32Array(t.length);for(var o=0;o<n.length;o++)for(var a=0;a<t.length;a++)r[o][a]=n[o]-t[a];return r},C=function(n,t){return n.map((function(n){return Math.pow(n,t)}))},P=function(n){return n.reduce((function(n,t){return Math.max(n,t)}))},R=function(n){return n.reduce((function(n,t){return Math.min(n,t)}))},k=function(n){return n.reduce((function(n,t){return n+t}))/n.length},z=r(2230),H=function(n){return function(t){var r=t.map((function(n){return Array.from(n)})),e=z.odF(r),o=z.VV$(e),a=z.Fp7(e),i=z.hiC(z.luU(e,o),z.luU(a,o)),u=z.p4s(i);return z.XLQ(u,n)}},L=(h=1024,d=[1,32,16,1],function(n,t,r,e){}(44100,2048,1024,[1,128,64,1]),{encoderMode:"LONG_FAST",isFlipped:!0,encoderJSONPath:"/models/encoder02_long/model.json",samplingRate:44100,frameLength:2048,encoderPreprocessor:H([1,128,64,1]),latentImgInfo:{imgSrc:"/imgs/latentImgs/encoder02_long.png",xmin:-3,xmax:4,ymin:-4.5,ymax:3}});H([1,128,64,1])},5970:function(n,t,r){"use strict";r.r(t);var e=r(5893),o=r(1639),a=r(560),i=r(9497),u=r(5968),l=r(5152),c=r.n(l),f=r(1163),s=r(7294),h=r(7844),d=r.n(h),g=r(5848),m=r.n(g);function v(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function p(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,a=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(a.push(e.value),!t||a.length!==t);i=!0);}catch(l){u=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return v(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=c()((function(){return Promise.all([r.e(6),r.e(873),r.e(437),r.e(113)]).then(r.bind(r,3241)).then((function(n){return n.AudioVisualizer}))}),{loadableGenerated:{webpack:function(){return[3241]}},ssr:!1});t.default=function(){var n=(0,f.useRouter)(),t=p(d()(a.u.ANNOTATIONS,{}),1)[0],r=p(d()(a.u.CORRECT_ESTIMATION_HISTORY,[]),1)[0],l=(0,u.n)(r),c=s.useCallback((function(){n.push("/settingshape")}),[n]);return(0,e.jsxs)("div",{className:m().container,children:[(0,e.jsx)("h1",{children:"TimMorph"}),(0,e.jsx)("h3",{className:m().caution,children:"Only Chrome is supported. Other browsers are not recommended."}),l?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b",onClick:c}),(0,e.jsxs)("div",{className:m().main__content,children:[(0,e.jsx)(y,{audioFilePath:"/audios/beginner.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:t,title:"beginner"}),(0,e.jsx)(y,{audioFilePath:"/audios/intermediate.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:t,title:"intermediate"}),(0,e.jsx)(y,{audioFilePath:"/audios/expert.wav",visualizerConfig:i.sq,visualizeMode:"SHAPE",annotations:t,title:"expert"})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"It seems you have not finished shape setting."}),(0,e.jsx)(o.z,{text:"\u56f3\u5f62\u3092\u8a2d\u5b9a\u3059\u308b",onClick:c})]})]})}},5968:function(n,t,r){"use strict";r.d(t,{n:function(){return e}});var e=function(n){var t=function(n){for(var t=0,r=n.length-1;r>=0;r--){if(!n[r][1])return t;t+=1}return t}(n);return t>=3}},1314:function(n){n.exports={button__basic:"Button_button__basic__5C4_V"}},5848:function(n){n.exports={container:"TopPage_container__zilsm",caution:"TopPage_caution__2wd_5",main__content:"TopPage_main__content__iOn10"}},1163:function(n,t,r){n.exports=r(880)},7844:function(n,t,r){"use strict";var e=this&&this.__assign||function(){return e=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(7294);t.default=function(n,t,r){var a=o.useMemo((function(){return e({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},r)}),[r]),i=a.serializer,u=a.parser,l=a.logger,c=a.syncData,f=o.useState((function(){if("undefined"===typeof window)return t;try{var r=window.localStorage.getItem(n);return r?u(r):t}catch(e){return l(e),t}})),s=f[0],h=f[1];return o.useEffect((function(){if("undefined"!==typeof window){try{void 0!==s?window.localStorage.setItem(n,i(s)):window.localStorage.removeItem(n)}catch(t){l(t)}}}),[s]),o.useEffect((function(){if(c){var t=function(t){if(t.key===n&&t.storageArea===window.localStorage)try{h(t.newValue?u(t.newValue):void 0)}catch(t){l(t)}};if("undefined"!==typeof window)return window.addEventListener("storage",t),function(){return window.removeEventListener("storage",t)}}}),[n,c]),[s,h]}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},function(n){n.O(0,[864,723,132,974,904,642,815,774,888,179],(function(){return t=8312,n(n.s=t);var t}));var t=n.O();_N_E=t}]);