"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5995:function(t,n,e){e.r(n),e.d(n,{ExpAnnotator:function(){return k}});var r=e(5893),a=e(2916),l=e(4524),c=e(915),o=e(5640),s=e(7941),u=e(5952),i=e(7979),f=e(7294),b=e(1639),d=e(7347),m=e(4449),h=e(9678),j=e.n(h),p=e(9327),y=e(7495);function x(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function C(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function E(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){C(t,n,e[n])}))}return t}function v(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,a,l=[],c=!0,o=!1;try{for(e=e.call(t);!(c=(r=e.next()).done)&&(l.push(r.value),!n||l.length!==n);c=!0);}catch(s){o=!0,a=s}finally{try{c||null==e.return||e.return()}finally{if(o)throw a}}return l}}(t,n)||g(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,n){if(t){if("string"===typeof t)return x(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?x(t,n):void 0}}var k=function(t){var n=t.repSoundId,e=t.annotations,h=t.setAnnotations,x=t.correctEstimationHistory,g=t.setCorrectEstimationHistory,k=t.goNextCallback,N=t.resetCallback,O=f.useCallback((function(t){var r=E({},e,C({},n,t));h(r)}),[h]),w=f.useCallback((function(t){var e=S(x).filter((function(t){return t[0]!==n}));e.push([n,t]),g(e)}),[x,g,n]),D=f.useCallback((function(){var t=E({},e);delete t[n],h(t),A("YET"),null!==st.current&&ot(!st.current.paused)}),[]),T=v(f.useState("YET"),2),_=T[0],A=T[1],P=v(f.useState(null),2),I=P[0],R=P[1],H=v(f.useState(0),2),F=H[0],L=H[1],z=v(f.useState(null),2),V=z[0],Y=z[1],U=v(f.useState(null),2),G=U[0],J=U[1],W=v(f.useState(null),2),M=W[0],Z=W[1];f.useEffect((function(){if("YET"===_){var t=new s.f(a.R.inputDim,a.R.outputDim);R(t)}}),[_]),f.useEffect((function(){if(null!==I){var t=0,r=!0,a=!1,c=void 0;try{for(var o,s=Object.entries(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var i=v(o.value,2),f=i[0],b=i[1],d=f;if(d===n){A("DONE");var m=(0,u.H)(b);Y(m)}var h=l.g[d];I.addPoint(h,b),t+=1}}catch(y){a=!0,c=y}finally{try{r||null==s.return||s.return()}finally{if(a)throw c}}if(t>0){var j=I.estimate(l.g[n]),p=I.suggestVectors(l.g[n]);J(j),Z(p)}L(t)}}),[n,e,I]);var $=f.useCallback((function(){F<=a.R.inputDim?A("SELECT"):A("JUDGE")}),[F]),q=v(f.useState(null),2),B=q[0],K=q[1],Q=f.useCallback((function(t){K(t),A("EDIT")}),[]),X=f.useCallback((function(t){var n=(0,u.Z)(t);O(n),A("DONE")}),[O]),tt=f.useCallback((function(){A("SELECT")}),[]),nt=f.useCallback((function(){null!==G&&(O(G),w("CORRECT"),A("DONE"))}),[G,O,w]),et=f.useCallback((function(){null!==G&&A("SEARCH")}),[G]),rt=f.useCallback((function(t){O(t),w("SEARCH"),A("DONE")}),[O,w]),at=f.useCallback((function(){w("SELECT"),A("SELECT")}),[w]),lt=v(f.useState(!1),2),ct=lt[0],ot=lt[1],st=f.useRef(null);return(0,r.jsxs)("div",{className:j().container,children:[(0,r.jsxs)("h2",{className:j().title,children:["\u30b9\u30c6\u30c3\u30d71-","DONE"===_?F:F+1]}),(0,r.jsx)("audio",{src:(0,i.H)("/audios/repSounds/".concat(n,".wav")),controls:!0,loop:!0,onPlay:function(){return ot(!0)},ref:st,className:j().audio}),"DONE"===_||ct?(0,r.jsxs)(r.Fragment,{children:["YET"===_&&(0,r.jsxs)("div",{className:j().button__section,children:[(0,r.jsx)(b.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u958b\u59cb",onClick:$,className:j().button}),F>0&&(0,r.jsx)(b.z,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3001\u56f3\u5f62\u306e\u56de\u7b54\u3092\u59cb\u3081\u304b\u3089\u884c\u3046",onClick:N,className:"".concat(j().cancel__button," ").concat(j().button)})]}),"SELECT"===_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:j().guide,children:"\u4e0b\u306e\u56f3\u5f62\u306e\u4e2d\u304b\u3089\u3001\u97f3\u306b\u6700\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u56f3\u5f62\u3092\u4e00\u3064\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002"}),(0,r.jsx)(d.L,{selectCallback:Q})]}),"EDIT"===_&&null!==B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:j().guide,children:["\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5fae\u8abf\u7bc0\u3057\u3001\u81ea\u5206\u306b\u3068\u3063\u3066\u6700\u3082\u97f3\u306b\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u3088\u3046\u306b\u56f3\u5f62\u3092\u5909\u5f62\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002",(0,r.jsx)("br",{}),"\u65e2\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u5834\u5408\u306f\u305d\u306e\u307e\u307e\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002"]}),(0,r.jsx)(m.T,{defaultShapeParams:c._[B],confirmCallback:X,cancelCallback:tt})]}),"JUDGE"===_&&null!==G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:j().guide,children:["\u3053\u308c\u307e\u3067\u306e\u3042\u306a\u305f\u306e\u56de\u7b54\u304b\u3089\u3001\u3053\u306e\u97f3\u306b\u5bfe\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u56f3\u5f62\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u63a8\u5b9a\u3055\u308c\u307e\u3057\u305f\u3002",(0,r.jsx)("br",{}),"\u3053\u306e\u56f3\u5f62\u3067\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3068\u611f\u3058\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u300c\u56f3\u5f62\u3092\u4fee\u6b63\u3059\u308b\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),(0,r.jsx)(p.W,{estimatedShapeVector:G,isCorrectCallback:nt,isNotCorrectCallback:et})]}),"SEARCH"===_&&null!==G&&null!==M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:j().guide,children:["\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8abf\u7bc0\u3057\u3066\u3001\u56f3\u5f62\u304c\u97f3\u306b\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u3088\u3046\u306b\u5909\u5f62\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002",(0,r.jsx)("br",{}),"\u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u56f3\u5f62\u3092\u4f5c\u308c\u306a\u3044\u5834\u5408\u306f\u3001",(0,r.jsx)("br",{}),"\u300c\u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u3068\u611f\u3058\u308b\u56f3\u5f62\u3092\u4f5c\u308c\u306a\u3044\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002"]}),(0,r.jsx)(y.P,{defaultShapeVector:G,suggestionVectorsInfo:M,foundCallback:rt,notFoundCallback:at})]})]}):(0,r.jsx)("p",{children:"\u4e0a\u306e\u97f3\u3092\u518d\u751f\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u97f3\u306f\u7e70\u308a\u8fd4\u3057\u518d\u751f\u3055\u308c\u307e\u3059\uff09\u3002"}),"DONE"===_&&null!==V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:j().guide,children:["\u3042\u306a\u305f\u304c\u3053\u306e\u97f3\u306b\u5bfe\u5fdc\u3059\u308b\u3068\u56de\u7b54\u3057\u305f\u56f3\u5f62\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002",(0,r.jsx)("br",{}),"\u3053\u306e\u307e\u307e\u3067\u554f\u984c\u306a\u3044\u5834\u5408\u306f\u4e0b\u306e\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),(0,r.jsx)(o.DrawSamplingPointsSketch,{canvasWidth:150,canvasHeight:150,samplingPoints:V}),(0,r.jsxs)("div",{className:j().button__section,children:[(0,r.jsx)(b.z,{text:"\u6b21\u3078",onClick:k,className:j().button}),(0,r.jsx)(b.z,{text:"\u3053\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u3084\u308a\u76f4\u3059",onClick:D,className:"".concat(j().cancel__button," ").concat(j().button)}),F>0&&(0,r.jsx)(b.z,{text:"\u5168\u3066\u306e\u97f3\u306b\u5bfe\u3059\u308b\u56f3\u5f62\u306e\u56de\u7b54\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3001\u56f3\u5f62\u306e\u56de\u7b54\u3092\u59cb\u3081\u304b\u3089\u884c\u3046",onClick:N,className:"".concat(j().cancel__button," ").concat(j().button)})]})]})]})}}}]);