(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{1752:function(r,n,e){r.exports=e(6949)},7760:function(r,n,e){"use strict";e.r(n),e.d(n,{AudioVisualizer:function(){return I}});var t=e(4051),o=e.n(t),i=e(5893),s=e(2230);function a(r,n,e,t,o,i,s){try{var a=r[i](s),u=a.value}catch(c){return void e(c)}a.done?n(u):Promise.resolve(u).then(t,o)}var u=function(){function r(n,e,t,o){!function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),this.isEncoding=!1,this.result=null,this.callback=void 0,this.isFlipped=n,this.encoder=e,this.preprocessor=t,o&&(this.callback=o)}return r.prototype.encodeAudio=function(r){var n,e=this;return(n=o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isEncoding&&null!==r){n.next=2;break}return n.abrupt("return");case 2:return e.isEncoding=!0,n.next=5,s.glt();case 5:return s.lub((function(){var n=e.preprocessor(r),t=e.encoder.predict([n]),o=e.isFlipped?1:0,i=s.XLQ(t[o],[2]),a=Array.from(i.dataSync());e.result={coord:a},e.callback&&e.callback({coord:a})})),e.isEncoding=!1,n.next=9,s.glt();case 9:case"end":return n.stop()}}),n)})),function(){var r=this,e=arguments;return new Promise((function(t,o){var i=n.apply(r,e);function s(r){a(i,t,o,s,u,"next",r)}function u(r){a(i,t,o,s,u,"throw",r)}s(void 0)}))})()},r}(),c=e(7294),l=e(8982),f=e.n(l),d=e(5152),_=e.n(d),p=e(7979),v=e(7941),h=e(2916),w=e(7844),m=e.n(w),y=e(4524),g=e(5952);function b(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function S(r,n,e,t,o,i,s){try{var a=r[i](s),u=a.value}catch(c){return void e(c)}a.done?n(u):Promise.resolve(u).then(t,o)}function k(r){return function(){var n=this,e=arguments;return new Promise((function(t,o){var i=r.apply(n,e);function s(r){S(i,t,o,s,a,"next",r)}function a(r){S(i,t,o,s,a,"throw",r)}s(void 0)}))}}function x(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var t,o,i=[],s=!0,a=!1;try{for(e=e.call(r);!(s=(t=e.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(u){a=!0,o=u}finally{try{s||null==e.return||e.return()}finally{if(a)throw o}}return i}}(r,n)||A(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(r){return function(r){if(Array.isArray(r))return b(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||A(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(r,n){if(r){if("string"===typeof r)return b(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(r,n):void 0}}var j=_()((function(){return e.e(157).then(e.bind(e,9157)).then((function(r){return r.PlotLatentSketch}))}),{loadableGenerated:{webpack:function(){return[9157]}},ssr:!1}),P=_()((function(){return e.e(640).then(e.bind(e,5640)).then((function(r){return r.DrawSamplingPointsSketch}))}),{loadableGenerated:{webpack:function(){return[5640]}},ssr:!1}),N=2/21,C=500,I=function(r){var n=r.audioFilePath,e=r.visualizerConfig,t=r.visualizeMode,a=r.title,l=x(c.useState(null),2),d=l[0],_=l[1];c.useEffect((function(){if(null===d){window.AudioContext=window.AudioContext||window.webkitAudioContext;var r=new AudioContext;_(r)}}),[]);var w=c.useRef(null),b=x(c.useState(null),2),S=b[0],A=b[1];c.useEffect((function(){if(null!==d&&null!==w.current&&null===S){var r=w.current,n=d.createMediaElementSource(r);A(n)}}),[d]);var I=x(c.useState(null),2),O=I[0],L=I[1];c.useEffect((function(){if(null!==d&&null===O){var r=function(){var r=k(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.audioWorklet.addModule("LONG_FAST"===e.encoderMode?(0,p.H)("/worklet-scripts/resample_mel.worklet.js"):(0,p.H)("/worklet-scripts/resample.worklet.js"));case 2:n=new AudioWorkletNode(d,"LONG_FAST"===e.encoderMode?"resample-mel.worklet":"resample.worklet",{parameterData:{bufferSize:e.frameLength,resampleRate:e.samplingRate}}),L(n);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}}),[d,e]),c.useEffect((function(){null!==d&&null!==S&&null!==O&&S.connect(O).connect(d.destination)}),[d,S,O]);var T=x(c.useState(null),2),z=T[0],F=T[1],H=x(c.useState(null),2),M=H[0],D=H[1];c.useEffect((function(){var r=function(){var r=k(o().mark((function r(){var n,t;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.YLj((0,p.H)(e.encoderJSONPath));case 2:n=r.sent,t=new u(e.isFlipped,n,e.encoderPreprocessor,D),F(t);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[e]),c.useEffect((function(){null!==O&&null!==z&&(O.port.onmessage=function(){var r=k(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:z.encodeAudio(n.data);case 1:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}())}),[O,z]);var R=x(c.useState([]),2),V=R[0],W=R[1],G=x(c.useState(null),2),J=G[0],B=G[1];c.useEffect((function(){if(null!==M){var r=E(V).concat([M]),n=r.length<=20?r:r.slice(1);W(n)}}),[M]),c.useEffect((function(){var r=V.length;if(0!==r){var n=V[r-1];if(null===J||r<20){for(var e=[],t=0;t<n.coord.length;t++){for(var o=0,i=0;i<r;i++)o+=V[i].coord[t];e.push(o/r)}B({coord:e})}else{var s=J.coord.map((function(r,e){return r*(1-N)+n.coord[e]*N}));B({coord:s})}}}),[V]);var Q=c.useCallback((function(){null!==d&&"running"!==d.state&&d.resume()}),[d]),U=c.useCallback((function(){null!==d&&"suspended"!==d.state&&d.suspend()}),[d]),X=x(m()("annotations",{}),2),Y=X[0],$=(X[1],x(c.useState(null),2)),q=$[0],K=$[1],Z=x(c.useState(0),2),rr=Z[0],nr=Z[1],er=x(c.useState(null),2),tr=er[0],or=er[1];return c.useEffect((function(){if("LATENT"!==t){var r=new v.f(h.R.inputDim,h.R.outputDim);K(r)}}),[t]),c.useEffect((function(){if(null!==q){var r=0,n=!0,e=!1,t=void 0;try{for(var o,i=Object.entries(Y)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=x(o.value,2),a=s[0],u=s[1],c=a,l=y.g[c];q.addPoint(l,u),r+=1}}catch(f){e=!0,t=f}finally{try{n||null==i.return||i.return()}finally{if(e)throw t}}nr(r)}}),[Y,q]),c.useEffect((function(){if(null!==q&&null!==J&&0!==rr){console.log(J.coord);var r=q.estimate(J.coord),n=(0,g.H)(r);or(n)}}),[J,q,rr]),(0,i.jsxs)("div",{className:f().container,children:[a&&(0,i.jsx)("h4",{className:f().title,children:a}),(0,i.jsx)("audio",{src:(0,p.H)(n),controls:!0,loop:!0,ref:w,onClick:Q,onPlay:Q,onPause:U}),"LATENT"===t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["first: ",null===J||void 0===J?void 0:J.coord[0]]}),(0,i.jsxs)("p",{children:["second: ",null===J||void 0===J?void 0:J.coord[1]]}),(0,i.jsx)(j,{canvasWidth:C,canvasHeight:C,encodeResult:J,latentImgInfo:e.latentImgInfo,className:f().sketch__container})]}),"SHAPE"===t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P,{canvasWidth:C,canvasHeight:C,samplingPoints:tr})})]})}},4524:function(r,n,e){"use strict";e.d(n,{P:function(){return t},g:function(){return o}});var t=["rs1_00","rs1_01","rs1_02","rs2_00","rs2_01","rs2_02","rs2_03","rs2_04","rs2_05","rs2_06","rs2_07","rs2_08","rs2_09","rs2_10","rs2_11","rs2_12","rs2_13","rs2_14","rs2_15","rs2_16","rs2_17","rs2_18","rs2_19","rs2_20","rs2_21","rs2_22","rs2_23","rs2_24","rs2_25","rs2_26","rs2_27","rs2_28","rs2_29"],o={rs1_00:[2.1120596,-5.1291986],rs1_01:[1.5762187,2.60493],rs1_02:[-2.382232,.10038004],rs2_00:[2.5993729,-1.2009252],rs2_01:[-.94393796,-3.1945283],rs2_02:[.30973345,.21844022],rs2_03:[3.47645,1.0034096],rs2_04:[1.4669484,-3.0503924],rs2_05:[-.88771594,-1.2711746],rs2_06:[.83919644,-1.4324392],rs2_07:[1.8265278,.890573],rs2_08:[-1.0803591,1.0704242],rs2_09:[.2325852,-2.6102617],rs2_10:[.6404754,1.698138],rs2_11:[1.4612306,-.3326639],rs2_12:[2.6401613,1.8669294],rs2_13:[-1.0652071,-.106734954],rs2_14:[2.209707,-3.9786203],rs2_15:[2.5716124,-.07289239],rs2_16:[-1.5073073,-2.1868656],rs2_17:[.029848829,-.78534675],rs2_18:[1.55066,-2.0992553],rs2_19:[-.12433945,1.0623416],rs2_20:[-.06967662,-1.7259902],rs2_21:[1.2427349,-3.9178205],rs2_22:[1.7086548,-1.2185427],rs2_23:[-1.9910475,.89425653],rs2_24:[-1.8384401,-.5902677],rs2_25:[-.6483803,-2.3826134],rs2_26:[1.1159008,.4414356],rs2_27:[.52229494,-3.384752],rs2_28:[2.6333241,.76941025],rs2_29:[1.7951645,1.6901001]}},8982:function(r){r.exports={container:"AudioVisualizer_container__F_TNB",title:"AudioVisualizer_title__NWWgt",sketch__container:"AudioVisualizer_sketch__container__uaL9G"}},7844:function(r,n,e){"use strict";var t=this&&this.__assign||function(){return t=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r},t.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o=e(7294);n.default=function(r,n,e){var i=o.useMemo((function(){return t({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},e)}),[e]),s=i.serializer,a=i.parser,u=i.logger,c=i.syncData,l=o.useState((function(){if("undefined"===typeof window)return n;try{var e=window.localStorage.getItem(r);return e?a(e):n}catch(t){return u(t),n}})),f=l[0],d=l[1];return o.useEffect((function(){if("undefined"!==typeof window){try{void 0!==f?window.localStorage.setItem(r,s(f)):window.localStorage.removeItem(r)}catch(n){u(n)}}}),[f]),o.useEffect((function(){if(c){var n=function(n){if(n.key===r&&n.storageArea===window.localStorage)try{d(n.newValue?a(n.newValue):void 0)}catch(n){u(n)}};if("undefined"!==typeof window)return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}}}),[r,c]),[f,d]}}}]);